/**
 * Modules in this bundle
 * @license
 * 
 * react-carousel-ninja:
 *   license: MIT
 *   author: ahomu
 *   homepage: https://github.com/ahomu/Loxe
 *   version: 0.1.0
 * 
 * date-now:
 *   licenses: MIT
 *   author: Raynos <raynos2@gmail.com>
 *   maintainers: raynos <raynos2@gmail.com>
 *   contributors: Artem Shoobovych
 *   homepage: https://github.com/Raynos/date-now
 *   version: 1.0.1
 * 
 * debounce:
 *   license: MIT
 *   maintainers: mattmueller <mattmuelle@gmail.com>, jongleberry <jonathanrichardong@gmail.com>, tootallnate <nathan@tootallnate.net>, clintwood <clint@anotherway.co.za>, thehydroimpulse <dnfagnan@gmail.com>, tjholowaychuk <tj@vision-media.ca>, rauchg <rauchg@gmail.com>, retrofox <rdsuarez@gmail.com>, coreh <thecoreh@gmail.com>, forbeslindesay <forbes@lindesay.co.uk>, kelonye <kelonyemitchel@gmail.com>, yields <yields@icloud.com>, anthonyshort <antshort@gmail.com>, ianstormtaylor <ian@ianstormtaylor.com>, cristiandouce <cristian@gravityonmars.com>, swatinem <arpad.borsos@googlemail.com>, stagas <gstagas@gmail.com>, amasad <amjad.masad@gmail.com>, juliangruber <julian@juliangruber.com>, shtylman <shtylman@gmail.com>, calvinfo <calvin@calv.info>, dominicbarnes <dominic@dbarnes.info>, timoxley <secoif@gmail.com>, stephenmathieson <me@stephenmathieson.com>, trevorgerhardt <trevorgerhardt@gmail.com>
 *   homepage: https://github.com/component/debounce
 *   version: 1.0.0
 * 
 * undefined:
 * 
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

/**
 * Module dependencies.
 */

var now = require('date-now');

/**
 * Returns a function, that, as long as it continues to be invoked, will not
 * be triggered. The function will be called after it stops being called for
 * N milliseconds. If `immediate` is passed, trigger the function on the
 * leading edge, instead of the trailing.
 *
 * @source underscore.js
 * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/
 * @param {Function} function to wrap
 * @param {Number} timeout in ms (`100`)
 * @param {Boolean} whether to execute at the beginning (`false`)
 * @api public
 */

module.exports = function debounce(func, wait, immediate){
  var timeout, args, context, timestamp, result;
  if (null == wait) wait = 100;

  function later() {
    var last = now() - timestamp;

    if (last < wait && last > 0) {
      timeout = setTimeout(later, wait - last);
    } else {
      timeout = null;
      if (!immediate) {
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      }
    }
  };

  return function debounced() {
    context = this;
    args = arguments;
    timestamp = now();
    var callNow = immediate && !timeout;
    if (!timeout) timeout = setTimeout(later, wait);
    if (callNow) {
      result = func.apply(context, args);
      context = args = null;
    }

    return result;
  };
};

},{"date-now":2}],2:[function(require,module,exports){
module.exports = Date.now || now

function now() {
    return new Date().getTime()
}

},{}],3:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var _reactDom = require('react-dom');

var ReactDOM = _reactDom;

var _debounce = require('debounce');

var debounce = _debounce;

var DURATION_DEBOUNCE_RESIZE = 300;
var DELTA_PERCENTAGE_SWIPE = .2;
var DIRECTION_RIGHT = 0;
var DIRECTION_LEFT = 1;

var CarouselNinjaContent = (function (_React$Component) {
    _inherits(CarouselNinjaContent, _React$Component);

    function CarouselNinjaContent() {
        var _this = this;

        _classCallCheck(this, CarouselNinjaContent);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _React$Component.call.apply(_React$Component, [this].concat(args));
        this.state = {
            outerWidth: 0,
            innerWidth: 0,
            dragging: false,
            deltaX: 0,
            deltaY: 0
        };
        this.startCoordinate = {
            x: 0,
            y: 0
        };
        this.onResize = debounce(function (evt) {
            _this.calculateWidth();
        }, DURATION_DEBOUNCE_RESIZE);
    }

    CarouselNinjaContent.prototype.calculateWidth = function calculateWidth() {
        var firstChild = this.refs['child-0'];
        this.setState({
            outerWidth: ReactDOM.findDOMNode(this).clientWidth,
            innerWidth: firstChild.clientWidth
        });
    };

    CarouselNinjaContent.prototype.onMouseDown = function onMouseDown(evt) {
        this.startCoordinate = {
            x: evt.clientX,
            y: evt.clientY
        };
        this.setState({
            dragging: true
        });
    };

    CarouselNinjaContent.prototype.onMouseMove = function onMouseMove(evt) {
        if (!this.state.dragging) {
            return;
        }
        this.setState({
            deltaX: evt.clientX - this.startCoordinate.x,
            deltaY: evt.clientY - this.startCoordinate.y
        });
    };

    CarouselNinjaContent.prototype.onMouseUp = function onMouseUp() {
        if (!this.state.dragging) {
            return;
        }
        this.handleSwipe();
    };

    CarouselNinjaContent.prototype.onMouseLeave = function onMouseLeave() {
        if (!this.state.dragging) {
            return;
        }
        this.handleSwipe();
    };

    CarouselNinjaContent.prototype.handleSwipe = function handleSwipe() {
        var deltaAbsX = Math.abs(this.state.deltaX);
        var threshold = this.state.innerWidth * DELTA_PERCENTAGE_SWIPE;
        if (deltaAbsX > threshold) {
            var direction = this.state.deltaX > -1 ? DIRECTION_RIGHT : DIRECTION_LEFT;
            if (direction === DIRECTION_LEFT) {
                this.props.onSwipeLeft(this.props.select + 1);
            } else if (direction === DIRECTION_RIGHT) {
                this.props.onSwipeRight(this.props.select - 1);
            }
        }
        // reset
        this.startCoordinate = {
            x: 0,
            y: 0
        };
        this.setState({
            dragging: false,
            deltaX: 0,
            deltaY: 0
        });
    };

    CarouselNinjaContent.prototype.componentDidMount = function componentDidMount() {
        this.calculateWidth();
        window.addEventListener('resize', this.onResize);
    };

    CarouselNinjaContent.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
        if (this.props.onSelect) {
            this.props.onSelect(nextProps.select, this.props.select);
        }
    };

    CarouselNinjaContent.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {
        return false || nextProps.select !== this.props.select || nextProps.children !== this.props.children || nextState !== this.state;
    };

    CarouselNinjaContent.prototype.componentWillUnmount = function componentWillUnmount() {
        window.addEventListener('resize', this.onResize);
    };

    CarouselNinjaContent.prototype.render = function render() {
        var _this2 = this;

        var transformDeclaration = undefined;
        // before calc innerWidth (first mount)
        if (this.state.innerWidth) {
            var baseOffsetX = this.state.innerWidth * this.props.select;
            transformDeclaration = 'translate3d(-' + (baseOffsetX - this.state.deltaX) + 'px, 0, 0)';
        } else {
            var offsetPerPane = 100 / React.Children.count(this.props.children);
            transformDeclaration = 'translate3d(-' + offsetPerPane * this.props.select + '%, 0, 0)';
        }
        var widthOuterBwInner = this.state.outerWidth - this.state.innerWidth || 2;
        var style = {
            marginLeft: widthOuterBwInner / 2 + 'px',
            transform: transformDeclaration
        };
        return React.createElement("div", { "ref": "outer", "className": this.props.className + ' carousel-ninja__outer' }, React.createElement("ul", { "ref": "inner", "className": 'carousel-ninja__inner ' + (this.state.dragging ? 'carousel-ninja__inner--dragging' : ''), "style": style, "onMouseDown": this.onMouseDown.bind(this), "onMouseMove": this.onMouseMove.bind(this), "onMouseUp": this.onMouseUp.bind(this), "onMouseLeave": this.onMouseLeave.bind(this) }, React.Children.map(this.props.children, function (child, i) {
            var isSelectedChild = i === _this2.props.select;
            var className = 'carousel-ninja__pane ' + (isSelectedChild ? _this2.props.activeClass : '');
            return React.createElement("li", { "ref": 'child-' + i, "className": className, "key": i, "aria-hidden": isSelectedChild ? 'false' : 'true' }, child);
        })));
    };

    return CarouselNinjaContent;
})(React.Component);

exports['default'] = CarouselNinjaContent;

CarouselNinjaContent.defaultProps = {
    className: '',
    activeClass: 'is-active',
    select: 0,
    onSelect: function onSelect() {},
    onSwipeLeft: function onSwipeLeft() {},
    onSwipeRight: function onSwipeRight() {}
};

},{"debounce":1,"react":undefined,"react-dom":undefined}],4:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var CarouselNinjaSelector = (function (_React$Component) {
    _inherits(CarouselNinjaSelector, _React$Component);

    function CarouselNinjaSelector() {
        _classCallCheck(this, CarouselNinjaSelector);

        _React$Component.apply(this, arguments);
    }

    CarouselNinjaSelector.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
        if (this.props.onSelect) {
            this.props.onSelect(nextProps.select, this.props.select);
        }
    };

    CarouselNinjaSelector.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {
        return false || nextProps.select !== this.props.select || nextProps.children !== this.props.children;
    };

    CarouselNinjaSelector.prototype.renderFromChildren = function renderFromChildren() {
        var _this = this;

        return React.Children.map(this.props.children, function (child, i) {
            var isSelectedChild = i === _this.props.select;
            var className = '' + (isSelectedChild ? _this.props.activeClass : '');
            return React.createElement("li", { "className": className, "key": i, "onClick": _this.props.onClickSelector.bind(_this, i), "aria-selected": isSelectedChild ? 'true' : 'false' }, child);
        });
    };

    CarouselNinjaSelector.prototype.renderItemsBySelf = function renderItemsBySelf() {
        var children = [],
            iz = this.props.length;
        for (var i = 0; i < iz; i++) {
            var isSelectedChild = i === this.props.select;
            var className = 'carousel-ninja__selector-item ' + (isSelectedChild ? this.props.activeClass : '');
            children.push(React.createElement("li", { "className": className, "key": i, "onClick": this.props.onClickSelector.bind(this, i), "aria-selected": isSelectedChild ? 'true' : 'false' }, React.createElement("button", { "tabIndex": -1 })));
        }
        return children;
    };

    CarouselNinjaSelector.prototype.render = function render() {
        return React.createElement("ul", { "className": "carousel-ninja__selector" }, React.Children.count(this.props.children) ? this.renderFromChildren() : this.renderItemsBySelf());
    };

    return CarouselNinjaSelector;
})(React.Component);

exports['default'] = CarouselNinjaSelector;

CarouselNinjaSelector.defaultProps = {
    activeClass: 'is-active',
    select: 0,
    length: 0,
    onSelect: function onSelect() {},
    onClickSelector: function onClickSelector() {}
};

},{"react":undefined}],5:[function(require,module,exports){
/// <reference path="../typings/bundle.d.ts" />
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var _CarouselNinjaContent = require('./CarouselNinjaContent');

var _CarouselNinjaSelector = require('./CarouselNinjaSelector');

var KEYCODE_LEFT = 37;
var KEYCODE_RIGHT = 39;

var CarouselNinja = (function (_React$Component) {
    _inherits(CarouselNinja, _React$Component);

    function CarouselNinja() {
        _classCallCheck(this, CarouselNinja);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _React$Component.call.apply(_React$Component, [this].concat(args));
        this.state = {
            currentSelect: 2
        };
    }

    CarouselNinja.prototype.updateSelect = function updateSelect(select) {
        if (select < 0 || select > React.Children.count(this.props.children) - 1) {
            return;
        }
        this.setState({
            currentSelect: select
        });
    };

    CarouselNinja.prototype.onKeyUp = function onKeyUp(e) {
        switch (e.keyCode) {
            case KEYCODE_LEFT:
                this.updateSelect(this.state.currentSelect - 1);
                break;
            case KEYCODE_RIGHT:
                this.updateSelect(this.state.currentSelect + 1);
                break;
        }
    };

    CarouselNinja.prototype.onSelectChange = function onSelectChange(nextI, curtI) {
        this.props.onSelect(nextI, curtI);
    };

    CarouselNinja.prototype.onClickSelector = function onClickSelector(selectI) {
        this.updateSelect(selectI);
    };

    CarouselNinja.prototype.onSwipeLeft = function onSwipeLeft(nextI) {
        this.updateSelect(nextI);
    };

    CarouselNinja.prototype.onSwipeRight = function onSwipeRight(nextI) {
        this.updateSelect(nextI);
    };

    CarouselNinja.prototype.render = function render() {
        // TODO [aria-controls]
        return React.createElement("div", { "tabIndex": 0, "className": this.props.className, "onKeyUp": this.onKeyUp.bind(this) }, React.createElement(_CarouselNinjaContent['default'], { "activeClass": this.props.activeClass, "select": this.state.currentSelect, "onSelect": this.onSelectChange.bind(this), "onSwipeLeft": this.onSwipeLeft.bind(this), "onSwipeRight": this.onSwipeRight.bind(this) }, this.props.children), React.createElement(_CarouselNinjaSelector['default'], { "activeClass": this.props.activeClass, "select": this.state.currentSelect, "length": React.Children.count(this.props.children), "onSelect": this.onSelectChange.bind(this), "onClickSelector": this.onClickSelector.bind(this) }));
    };

    return CarouselNinja;
})(React.Component);

CarouselNinja.defaultProps = {
    className: '',
    activeClass: 'is-active',
    onSelect: function onSelect() {}
};
exports.CarouselNinja = CarouselNinja;
exports.CarouselNinjaContent = _CarouselNinjaContent['default'];
exports.CarouselNinjaSelector = _CarouselNinjaSelector['default'];

},{"./CarouselNinjaContent":3,"./CarouselNinjaSelector":4,"react":undefined}]},{},[5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2Uvbm9kZV9tb2R1bGVzL2RhdGUtbm93L2luZGV4LmpzIiwic3JjL0Nhcm91c2VsTmluamFDb250ZW50LnRzeCIsInNyYy9DYXJvdXNlbE5pbmphU2VsZWN0b3IudHN4Iiwic3JjL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztxQkNMdUIsT0FBTzs7SUFBbEIsS0FBSzs7d0JBQ1MsV0FBVzs7SUFBekIsUUFBUTs7d0JBQ00sVUFBVTs7SUFBeEIsUUFBUTs7QUFFcEIsSUFBTSx3QkFBd0IsR0FBRyxHQUFHLENBQUM7QUFDckMsSUFBTSxzQkFBc0IsR0FBSyxFQUFFLENBQUM7QUFFcEMsSUFBTSxlQUFlLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLElBQU0sY0FBYyxHQUFJLENBQUMsQ0FBQzs7SUFtQjFCLG9CQUFBO2NBQUEsb0JBQUE7O0FBQUEsYUFBQSxvQkFBQSxHQUFBOzs7OEJBQUEsb0JBQUE7OzBDQUFBLElBQUE7QUFBQSxnQkFBQTs7O0FBQWtELG9FQUFBLElBQUEsRUFB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SSxDQUFDLElBQUksQ0FBRSxFQUFBLGFBQzlCLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFFLEVBQUEsY0FDN0IsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUUsRUFBQSxFQUM5RCxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVMsQ0FDQSxFQUV2QixLQUFBLENBQUEsYUFBQSxvQ0FBc0IsRUFBQSxhQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFZLEVBQUEsUUFDOUIsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWMsRUFBQSxRQUMzQixFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFFLEVBQUEsVUFDMUMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUUsRUFBQSxpQkFDMUIsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUUsRUFBQSxDQUFHLENBQ3ZFLENBQ047S0FDSDs7V0FwRUgsYUFBQTtHQUE0QixLQUFLLENBQUMsU0FBUzs7QUFFbEMsYUFBQSxDQUFBLFlBQVksR0FBRztBQUNwQixhQUFTLEVBQUssRUFBRTtBQUNoQixlQUFXLEVBQUcsV0FBVztBQUN6QixZQUFRLEVBQU0sb0JBQUEsRUFBUTtDQUN2QixDQStERjtRQUdDLGFBQWEsR0FBYixhQUFhO1FBQ2Isb0JBQW9CO1FBQ3BCLHFCQUFxQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgbm93ID0gcmVxdWlyZSgnZGF0ZS1ub3cnKTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gKiBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG4gKiBOIG1pbGxpc2Vjb25kcy4gSWYgYGltbWVkaWF0ZWAgaXMgcGFzc2VkLCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0aGVcbiAqIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gKlxuICogQHNvdXJjZSB1bmRlcnNjb3JlLmpzXG4gKiBAc2VlIGh0dHA6Ly91bnNjcmlwdGFibGUuY29tLzIwMDkvMDMvMjAvZGVib3VuY2luZy1qYXZhc2NyaXB0LW1ldGhvZHMvXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbiB0byB3cmFwXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dCBpbiBtcyAoYDEwMGApXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHdoZXRoZXIgdG8gZXhlY3V0ZSBhdCB0aGUgYmVnaW5uaW5nIChgZmFsc2VgKVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSl7XG4gIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcbiAgaWYgKG51bGwgPT0gd2FpdCkgd2FpdCA9IDEwMDtcblxuICBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IG5vdygpIC0gdGltZXN0YW1wO1xuXG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPiAwKSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gbm93KCk7XG4gICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IERhdGUubm93IHx8IG5vd1xuXG5mdW5jdGlvbiBub3coKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0ICogYXMgZGVib3VuY2UgZnJvbSAnZGVib3VuY2UnO1xuXG5jb25zdCBEVVJBVElPTl9ERUJPVU5DRV9SRVNJWkUgPSAzMDA7XG5jb25zdCBERUxUQV9QRVJDRU5UQUdFX1NXSVBFICAgPSAuMjtcblxuY29uc3QgRElSRUNUSU9OX1JJR0hUID0gMDtcbmNvbnN0IERJUkVDVElPTl9MRUZUICA9IDE7XG5cbmludGVyZmFjZSBDYXJvdXNlbE5pbmphQ29udGVudFByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8Q2Fyb3VzZWxOaW5qYUNvbnRlbnQ+IHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBhY3RpdmVDbGFzcz86IHN0cmluZztcbiAgc2VsZWN0OiBudW1iZXI7XG4gIG9uU2VsZWN0PyA6IChuZXh0STogbnVtYmVyLCBjdXJ0STogbnVtYmVyKSA9PiB2b2lkO1xuICBvblN3aXBlTGVmdD8gOiAobmV4dEk6IG51bWJlcikgPT4gdm9pZDtcbiAgb25Td2lwZVJpZ2h0PyA6IChuZXh0STogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgQ2Fyb3VzZWxOaW5qYUNvbnRlbnRTdGF0ZSB7XG4gIG91dGVyV2lkdGg/OiBudW1iZXI7XG4gIGlubmVyV2lkdGg/OiBudW1iZXI7XG4gIGRyYWdnaW5nPzogYm9vbGVhbjtcbiAgZGVsdGFYPzogbnVtYmVyO1xuICBkZWx0YVk/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcm91c2VsTmluamFDb250ZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PENhcm91c2VsTmluamFDb250ZW50UHJvcHMsIENhcm91c2VsTmluamFDb250ZW50U3RhdGU+IHtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGNsYXNzTmFtZSAgICA6ICcnLFxuICAgIGFjdGl2ZUNsYXNzICA6ICdpcy1hY3RpdmUnLFxuICAgIHNlbGVjdCAgICAgICA6IDAsXG4gICAgb25TZWxlY3QgICAgIDogKCkgPT4ge30sXG4gICAgb25Td2lwZUxlZnQgIDogKCkgPT4ge30sXG4gICAgb25Td2lwZVJpZ2h0IDogKCkgPT4ge31cbiAgfTtcblxuICBzdGF0ZSA9IHtcbiAgICBvdXRlcldpZHRoIDogMCxcbiAgICBpbm5lcldpZHRoIDogMCxcbiAgICBkcmFnZ2luZyAgIDogZmFsc2UsXG4gICAgZGVsdGFYICAgICA6IDAsXG4gICAgZGVsdGFZICAgICA6IDBcbiAgfTtcblxuICBzdGFydENvb3JkaW5hdGU6IHtcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4gIH0gPSB7XG4gICAgeCA6IDAsXG4gICAgeSA6IDBcbiAgfTtcblxuICBjYWxjdWxhdGVXaWR0aCgpIHtcbiAgICBjb25zdCBmaXJzdENoaWxkOiBFbGVtZW50ID0gdGhpcy5yZWZzWydjaGlsZC0wJ10gYXMgYW55O1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgb3V0ZXJXaWR0aCA6IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLmNsaWVudFdpZHRoLFxuICAgICAgaW5uZXJXaWR0aCA6IGZpcnN0Q2hpbGQuY2xpZW50V2lkdGhcbiAgICB9KTtcbiAgfVxuXG4gIG9uTW91c2VEb3duKGV2dDogTW91c2VFdmVudCkge1xuICAgIHRoaXMuc3RhcnRDb29yZGluYXRlID0ge1xuICAgICAgeCA6IGV2dC5jbGllbnRYLFxuICAgICAgeSA6IGV2dC5jbGllbnRZXG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhZ2dpbmcgICA6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIG9uTW91c2VNb3ZlKGV2dDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRlbHRhWCA6IGV2dC5jbGllbnRYIC0gdGhpcy5zdGFydENvb3JkaW5hdGUueCxcbiAgICAgIGRlbHRhWSA6IGV2dC5jbGllbnRZIC0gdGhpcy5zdGFydENvb3JkaW5hdGUueVxuICAgIH0pO1xuICB9XG5cbiAgb25Nb3VzZVVwKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZVN3aXBlKCk7XG4gIH1cblxuICBvbk1vdXNlTGVhdmUoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlU3dpcGUoKTtcbiAgfVxuXG4gIGhhbmRsZVN3aXBlKCkge1xuICAgIGNvbnN0IGRlbHRhQWJzWCA9IE1hdGguYWJzKHRoaXMuc3RhdGUuZGVsdGFYKTtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSB0aGlzLnN0YXRlLmlubmVyV2lkdGggKiBERUxUQV9QRVJDRU5UQUdFX1NXSVBFO1xuXG4gICAgaWYgKGRlbHRhQWJzWCA+IHRocmVzaG9sZCkge1xuXG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLnN0YXRlLmRlbHRhWCA+IC0xID8gRElSRUNUSU9OX1JJR0hUIDogRElSRUNUSU9OX0xFRlQ7XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09IERJUkVDVElPTl9MRUZUKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Td2lwZUxlZnQodGhpcy5wcm9wcy5zZWxlY3QgKyAxKTtcbiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBESVJFQ1RJT05fUklHSFQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblN3aXBlUmlnaHQodGhpcy5wcm9wcy5zZWxlY3QgLSAxKTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIC8vIHJlc2V0XG4gICAgdGhpcy5zdGFydENvb3JkaW5hdGUgPSB7XG4gICAgICB4IDogMCxcbiAgICAgIHkgOiAwXG4gICAgfTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRyYWdnaW5nIDogZmFsc2UsXG4gICAgICBkZWx0YVggICA6IDAsXG4gICAgICBkZWx0YVkgICA6IDBcbiAgICB9KTtcbiAgfVxuXG4gIG9uUmVzaXplID0gZGVib3VuY2UoKGV2dDogRXZlbnQpID0+IHtcbiAgICB0aGlzLmNhbGN1bGF0ZVdpZHRoKCk7XG4gIH0sIERVUkFUSU9OX0RFQk9VTkNFX1JFU0laRSk7XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5jYWxjdWxhdGVXaWR0aCgpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBDYXJvdXNlbE5pbmphQ29udGVudFByb3BzKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25TZWxlY3QpIHtcbiAgICAgIHRoaXMucHJvcHMub25TZWxlY3QobmV4dFByb3BzLnNlbGVjdCwgdGhpcy5wcm9wcy5zZWxlY3QpO1xuICAgIH1cbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IENhcm91c2VsTmluamFDb250ZW50UHJvcHMsIG5leHRTdGF0ZTogQ2Fyb3VzZWxOaW5qYUNvbnRlbnRTdGF0ZSkge1xuICAgIHJldHVybiBmYWxzZSB8fFxuICAgICAgbmV4dFByb3BzLnNlbGVjdCAhPT0gdGhpcy5wcm9wcy5zZWxlY3QgfHxcbiAgICAgIG5leHRQcm9wcy5jaGlsZHJlbiAhPT0gdGhpcy5wcm9wcy5jaGlsZHJlbiB8fFxuICAgICAgbmV4dFN0YXRlICE9PSB0aGlzLnN0YXRlXG4gICAgO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB0cmFuc2Zvcm1EZWNsYXJhdGlvbjogc3RyaW5nO1xuXG4gICAgLy8gYmVmb3JlIGNhbGMgaW5uZXJXaWR0aCAoZmlyc3QgbW91bnQpXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5uZXJXaWR0aCkge1xuICAgICAgY29uc3QgYmFzZU9mZnNldFggPSB0aGlzLnN0YXRlLmlubmVyV2lkdGggKiB0aGlzLnByb3BzLnNlbGVjdDtcbiAgICAgIHRyYW5zZm9ybURlY2xhcmF0aW9uID0gYHRyYW5zbGF0ZTNkKC0ke2Jhc2VPZmZzZXRYIC0gdGhpcy5zdGF0ZS5kZWx0YVh9cHgsIDAsIDApYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb2Zmc2V0UGVyUGFuZSA9IDEwMCAvIFJlYWN0LkNoaWxkcmVuLmNvdW50KHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICAgICAgdHJhbnNmb3JtRGVjbGFyYXRpb24gPSBgdHJhbnNsYXRlM2QoLSR7b2Zmc2V0UGVyUGFuZSAqIHRoaXMucHJvcHMuc2VsZWN0fSUsIDAsIDApYDtcbiAgICB9XG5cbiAgICBjb25zdCB3aWR0aE91dGVyQndJbm5lciA9ICh0aGlzLnN0YXRlLm91dGVyV2lkdGggLSB0aGlzLnN0YXRlLmlubmVyV2lkdGgpIHx8IDI7XG4gICAgY29uc3Qgc3R5bGUgPSB7XG4gICAgICBtYXJnaW5MZWZ0IDogYCR7d2lkdGhPdXRlckJ3SW5uZXIgLyAyfXB4YCxcbiAgICAgIHRyYW5zZm9ybSAgOiB0cmFuc2Zvcm1EZWNsYXJhdGlvblxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiByZWY9XCJvdXRlclwiXG4gICAgICAgICAgIGNsYXNzTmFtZT17YCR7dGhpcy5wcm9wcy5jbGFzc05hbWV9IGNhcm91c2VsLW5pbmphX19vdXRlcmB9PlxuICAgICAgICA8dWwgcmVmPVwiaW5uZXJcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgY2Fyb3VzZWwtbmluamFfX2lubmVyICR7dGhpcy5zdGF0ZS5kcmFnZ2luZyA/ICdjYXJvdXNlbC1uaW5qYV9faW5uZXItLWRyYWdnaW5nJyA6ICcnfWB9XG4gICAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgICAgICBvbk1vdXNlRG93bj17dGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgb25Nb3VzZU1vdmU9e3RoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIG9uTW91c2VVcD17dGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKX0+XG5cbiAgICAgICAgICB7UmVhY3QuQ2hpbGRyZW4ubWFwKHRoaXMucHJvcHMuY2hpbGRyZW4sIChjaGlsZDogUmVhY3QuUmVhY3ROb2RlLCBpOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWRDaGlsZCA9IGkgPT09IHRoaXMucHJvcHMuc2VsZWN0O1xuICAgICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gYGNhcm91c2VsLW5pbmphX19wYW5lICR7aXNTZWxlY3RlZENoaWxkID8gdGhpcy5wcm9wcy5hY3RpdmVDbGFzcyA6ICcnfWA7XG5cbiAgICAgICAgICAgIHJldHVybiA8bGkgcmVmPXtgY2hpbGQtJHtpfWB9XG4gICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPXtpc1NlbGVjdGVkQ2hpbGQgPyAnZmFsc2UnIDogJ3RydWUnfT57Y2hpbGR9PC9saT47XG4gICAgICAgICAgfSl9XG5cbiAgICAgICAgPC91bD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdEVsZW1lbnQgPSBfX1JlYWN0LlJlYWN0RWxlbWVudDtcblxuaW50ZXJmYWNlIENhcm91c2VsU2VsZWN0b3JQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPENhcm91c2VsTmluamFTZWxlY3Rvcj4ge1xuICBhY3RpdmVDbGFzcz86IHN0cmluZztcbiAgc2VsZWN0OiBudW1iZXI7XG4gIGxlbmd0aDogbnVtYmVyO1xuICBvblNlbGVjdD86IChwcmV2STogbnVtYmVyLCBuZXh0STogbnVtYmVyKSA9PiB2b2lkO1xuICBvbkNsaWNrU2VsZWN0b3I/OiAoc2VsZWN0STogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJvdXNlbE5pbmphU2VsZWN0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Q2Fyb3VzZWxTZWxlY3RvclByb3BzLCBhbnk+IHtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGFjdGl2ZUNsYXNzICAgICA6ICdpcy1hY3RpdmUnLFxuICAgIHNlbGVjdCAgICAgICAgICA6IDAsXG4gICAgbGVuZ3RoICAgICAgICAgIDogMCxcbiAgICBvblNlbGVjdCAgICAgICAgOiAoKSA9PiB7fSxcbiAgICBvbkNsaWNrU2VsZWN0b3IgOiAoKSA9PiB7fSxcbiAgfTtcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wczogQ2Fyb3VzZWxTZWxlY3RvclByb3BzKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25TZWxlY3QpIHtcbiAgICAgIHRoaXMucHJvcHMub25TZWxlY3QobmV4dFByb3BzLnNlbGVjdCwgdGhpcy5wcm9wcy5zZWxlY3QpO1xuICAgIH1cbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IENhcm91c2VsU2VsZWN0b3JQcm9wcykge1xuICAgIHJldHVybiBmYWxzZSB8fFxuICAgICAgbmV4dFByb3BzLnNlbGVjdCAhPT0gdGhpcy5wcm9wcy5zZWxlY3QgfHxcbiAgICAgIG5leHRQcm9wcy5jaGlsZHJlbiAhPT0gdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgIDtcbiAgfVxuXG4gIHJlbmRlckZyb21DaGlsZHJlbigpIHtcbiAgICByZXR1cm4gUmVhY3QuQ2hpbGRyZW4ubWFwKHRoaXMucHJvcHMuY2hpbGRyZW4sIChjaGlsZDogUmVhY3QuUmVhY3ROb2RlLCBpOiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGlzU2VsZWN0ZWRDaGlsZCA9IGkgPT09IHRoaXMucHJvcHMuc2VsZWN0O1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gYCR7aXNTZWxlY3RlZENoaWxkID8gdGhpcy5wcm9wcy5hY3RpdmVDbGFzcyA6ICcnfWA7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8bGkgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2tTZWxlY3Rvci5iaW5kKHRoaXMsIGkpfVxuICAgICAgICAgICAgYXJpYS1zZWxlY3RlZD17aXNTZWxlY3RlZENoaWxkID8gJ3RydWUnIDogJ2ZhbHNlJ30+XG4gICAgICAgICAge2NoaWxkfVxuICAgICAgICA8L2xpPlxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zQnlTZWxmKCkge1xuICAgIGNvbnN0IGNoaWxkcmVuOiBSZWFjdEVsZW1lbnQ8YW55PltdID0gW10sIGl6ID0gdGhpcy5wcm9wcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpejsgaSsrKSB7XG4gICAgICBsZXQgaXNTZWxlY3RlZENoaWxkID0gaSA9PT0gdGhpcy5wcm9wcy5zZWxlY3Q7XG4gICAgICBsZXQgY2xhc3NOYW1lID0gYGNhcm91c2VsLW5pbmphX19zZWxlY3Rvci1pdGVtICR7aXNTZWxlY3RlZENoaWxkID8gdGhpcy5wcm9wcy5hY3RpdmVDbGFzcyA6ICcnfWA7XG4gICAgICBjaGlsZHJlbi5wdXNoKChcbiAgICAgICAgPGxpIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrU2VsZWN0b3IuYmluZCh0aGlzLCBpKX1cbiAgICAgICAgICAgIGFyaWEtc2VsZWN0ZWQ9e2lzU2VsZWN0ZWRDaGlsZCA/ICd0cnVlJyA6ICdmYWxzZSd9PlxuICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ey0xfSAvPlxuICAgICAgICA8L2xpPlxuICAgICAgKSlcbiAgICB9XG4gICAgcmV0dXJuIGNoaWxkcmVuXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDx1bCBjbGFzc05hbWU9XCJjYXJvdXNlbC1uaW5qYV9fc2VsZWN0b3JcIj5cbiAgICAgICAge1JlYWN0LkNoaWxkcmVuLmNvdW50KHRoaXMucHJvcHMuY2hpbGRyZW4pID8gdGhpcy5yZW5kZXJGcm9tQ2hpbGRyZW4oKSA6IHRoaXMucmVuZGVySXRlbXNCeVNlbGYoKX1cbiAgICAgIDwvdWw+XG4gICAgKTtcbiAgfVxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvYnVuZGxlLmQudHNcIiAvPlxuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IENhcm91c2VsTmluamFDb250ZW50IGZyb20gJy4vQ2Fyb3VzZWxOaW5qYUNvbnRlbnQnO1xuaW1wb3J0IENhcm91c2VsTmluamFTZWxlY3RvciBmcm9tICcuL0Nhcm91c2VsTmluamFTZWxlY3Rvcic7XG5cbmNvbnN0IEtFWUNPREVfTEVGVCAgPSAzNztcbmNvbnN0IEtFWUNPREVfUklHSFQgPSAzOTtcblxuaW50ZXJmYWNlIENhcm91c2VsTmluamFQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPENhcm91c2VsTmluamE+IHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBhY3RpdmVDbGFzcz86IHN0cmluZztcbiAgb25TZWxlY3Q/OiAocHJldkk6IG51bWJlciwgbmV4dEk6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuY2xhc3MgQ2Fyb3VzZWxOaW5qYSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxDYXJvdXNlbE5pbmphUHJvcHMsIGFueT4ge1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgY2xhc3NOYW1lICAgOiAnJyxcbiAgICBhY3RpdmVDbGFzcyA6ICdpcy1hY3RpdmUnLFxuICAgIG9uU2VsZWN0ICAgIDogKCkgPT4ge30sXG4gIH07XG5cbiAgc3RhdGUgPSB7XG4gICAgY3VycmVudFNlbGVjdCA6IDJcbiAgfTtcblxuICB1cGRhdGVTZWxlY3Qoc2VsZWN0OiBudW1iZXIpIHtcbiAgICBpZiAoc2VsZWN0IDwgMCB8fCBzZWxlY3QgPiBSZWFjdC5DaGlsZHJlbi5jb3VudCh0aGlzLnByb3BzLmNoaWxkcmVuKSAtIDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjdXJyZW50U2VsZWN0IDogc2VsZWN0XG4gICAgfSk7XG4gIH1cblxuICBvbktleVVwKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBzd2l0Y2goZS5rZXlDb2RlKSB7XG4gICAgICBjYXNlIEtFWUNPREVfTEVGVDpcbiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3QodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0IC0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVlDT0RFX1JJR0hUOlxuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3QgKyAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgb25TZWxlY3RDaGFuZ2UobmV4dEk6IG51bWJlciwgY3VydEk6IG51bWJlcikge1xuICAgIHRoaXMucHJvcHMub25TZWxlY3QobmV4dEksIGN1cnRJKTtcbiAgfVxuXG4gIG9uQ2xpY2tTZWxlY3RvcihzZWxlY3RJOiBudW1iZXIpIHtcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdChzZWxlY3RJKTtcbiAgfVxuXG4gIG9uU3dpcGVMZWZ0KG5leHRJOiBudW1iZXIpIHtcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdChuZXh0SSk7XG4gIH1cblxuICBvblN3aXBlUmlnaHQobmV4dEk6IG51bWJlcikge1xuICAgIHRoaXMudXBkYXRlU2VsZWN0KG5leHRJKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyBUT0RPIFthcmlhLWNvbnRyb2xzXVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgdGFiSW5kZXg9ezB9IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWV9IG9uS2V5VXA9e3RoaXMub25LZXlVcC5iaW5kKHRoaXMpfT5cbiAgICAgICAgPENhcm91c2VsTmluamFDb250ZW50IGFjdGl2ZUNsYXNzPXt0aGlzLnByb3BzLmFjdGl2ZUNsYXNzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0PXt0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17dGhpcy5vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Td2lwZUxlZnQ9e3RoaXMub25Td2lwZUxlZnQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3dpcGVSaWdodD17dGhpcy5vblN3aXBlUmlnaHQuYmluZCh0aGlzKX0+XG4gICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDwvQ2Fyb3VzZWxOaW5qYUNvbnRlbnQ+XG5cbiAgICAgICAgPENhcm91c2VsTmluamFTZWxlY3RvciBhY3RpdmVDbGFzcz17dGhpcy5wcm9wcy5hY3RpdmVDbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Q9e3RoaXMuc3RhdGUuY3VycmVudFNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg9e1JlYWN0LkNoaWxkcmVuLmNvdW50KHRoaXMucHJvcHMuY2hpbGRyZW4pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXt0aGlzLm9uU2VsZWN0Q2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdG9yPXt0aGlzLm9uQ2xpY2tTZWxlY3Rvci5iaW5kKHRoaXMpfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBDYXJvdXNlbE5pbmphLFxuICBDYXJvdXNlbE5pbmphQ29udGVudCxcbiAgQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yXG59O1xuIl19
