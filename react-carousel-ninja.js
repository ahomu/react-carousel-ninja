/**
 * Modules in this bundle
 * @license
 * 
 * react-carousel-ninja:
 *   license: MIT
 *   author: ahomu
 *   homepage: https://github.com/ahomu/react-carousel-ninja
 *   version: 0.1.3
 * 
 * date-now:
 *   licenses: MIT
 *   author: Raynos <raynos2@gmail.com>
 *   maintainers: raynos <raynos2@gmail.com>
 *   contributors: Artem Shoobovych
 *   homepage: https://github.com/Raynos/date-now
 *   version: 1.0.1
 * 
 * debounce:
 *   license: MIT
 *   maintainers: mattmueller <mattmuelle@gmail.com>, jongleberry <jonathanrichardong@gmail.com>, tootallnate <nathan@tootallnate.net>, clintwood <clint@anotherway.co.za>, thehydroimpulse <dnfagnan@gmail.com>, tjholowaychuk <tj@vision-media.ca>, rauchg <rauchg@gmail.com>, retrofox <rdsuarez@gmail.com>, coreh <thecoreh@gmail.com>, forbeslindesay <forbes@lindesay.co.uk>, kelonye <kelonyemitchel@gmail.com>, yields <yields@icloud.com>, anthonyshort <antshort@gmail.com>, ianstormtaylor <ian@ianstormtaylor.com>, cristiandouce <cristian@gravityonmars.com>, swatinem <arpad.borsos@googlemail.com>, stagas <gstagas@gmail.com>, amasad <amjad.masad@gmail.com>, juliangruber <julian@juliangruber.com>, shtylman <shtylman@gmail.com>, calvinfo <calvin@calv.info>, dominicbarnes <dominic@dbarnes.info>, timoxley <secoif@gmail.com>, stephenmathieson <me@stephenmathieson.com>, trevorgerhardt <trevorgerhardt@gmail.com>
 *   homepage: https://github.com/component/debounce
 *   version: 1.0.0
 * 
 * throttleit:
 *   license: MIT
 *   maintainers: tjholowaychuk <tj@vision-media.ca>, tootallnate <nathan@tootallnate.net>, rauchg <rauchg@gmail.com>, retrofox <rdsuarez@gmail.com>, coreh <thecoreh@gmail.com>, forbeslindesay <forbes@lindesay.co.uk>, kelonye <kelonyemitchel@gmail.com>, mattmueller <mattmuelle@gmail.com>, yields <yields@icloud.com>, anthonyshort <antshort@gmail.com>, jongleberry <jonathanrichardong@gmail.com>, ianstormtaylor <ian@ianstormtaylor.com>, cristiandouce <cristian@gravityonmars.com>, swatinem <arpad.borsos@googlemail.com>, stagas <gstagas@gmail.com>, amasad <amjad.masad@gmail.com>, juliangruber <julian@juliangruber.com>, shtylman <shtylman@gmail.com>, calvinfo <calvin@calv.info>, dominicbarnes <dominic@dbarnes.info>, stephenmathieson <me@stephenmathieson.com>, trevorgerhardt <trevorgerhardt@gmail.com>, timaschew <timaschew@gmail.com>, hughsk <hughskennedy@gmail.com>
 *   homepage: https://github.com/component/throttle
 *   version: 1.0.0
 * 
 * undefined:
 * 
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

/**
 * Module dependencies.
 */

var now = require('date-now');

/**
 * Returns a function, that, as long as it continues to be invoked, will not
 * be triggered. The function will be called after it stops being called for
 * N milliseconds. If `immediate` is passed, trigger the function on the
 * leading edge, instead of the trailing.
 *
 * @source underscore.js
 * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/
 * @param {Function} function to wrap
 * @param {Number} timeout in ms (`100`)
 * @param {Boolean} whether to execute at the beginning (`false`)
 * @api public
 */

module.exports = function debounce(func, wait, immediate){
  var timeout, args, context, timestamp, result;
  if (null == wait) wait = 100;

  function later() {
    var last = now() - timestamp;

    if (last < wait && last > 0) {
      timeout = setTimeout(later, wait - last);
    } else {
      timeout = null;
      if (!immediate) {
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      }
    }
  };

  return function debounced() {
    context = this;
    args = arguments;
    timestamp = now();
    var callNow = immediate && !timeout;
    if (!timeout) timeout = setTimeout(later, wait);
    if (callNow) {
      result = func.apply(context, args);
      context = args = null;
    }

    return result;
  };
};

},{"date-now":2}],2:[function(require,module,exports){
module.exports = Date.now || now

function now() {
    return new Date().getTime()
}

},{}],3:[function(require,module,exports){
module.exports = throttle;

/**
 * Returns a new function that, when invoked, invokes `func` at most once per `wait` milliseconds.
 *
 * @param {Function} func Function to wrap.
 * @param {Number} wait Number of milliseconds that must elapse between `func` invocations.
 * @return {Function} A new function that wraps the `func` function passed in.
 */

function throttle (func, wait) {
  var ctx, args, rtn, timeoutID; // caching
  var last = 0;

  return function throttled () {
    ctx = this;
    args = arguments;
    var delta = new Date() - last;
    if (!timeoutID)
      if (delta >= wait) call();
      else timeoutID = setTimeout(call, wait - delta);
    return rtn;
  };

  function call () {
    timeoutID = 0;
    last = +new Date();
    rtn = func.apply(ctx, args);
    ctx = null;
    args = null;
  }
}

},{}],4:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var _debounce = require('debounce');

var debounce = _debounce;

var DURATION_DEBOUNCE_RESIZE = 300;
var DELTA_PERCENTAGE_SWIPE = .2;
var DIRECTION_RIGHT = 0;
var DIRECTION_LEFT = 1;

var CarouselNinjaContainer = (function (_React$Component) {
    _inherits(CarouselNinjaContainer, _React$Component);

    function CarouselNinjaContainer() {
        var _this = this;

        _classCallCheck(this, CarouselNinjaContainer);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _React$Component.call.apply(_React$Component, [this].concat(args));
        this.state = {
            outerWidth: 0,
            innerWidth: 0,
            dragging: false,
            deltaX: 0,
            deltaY: 0
        };
        this.startCoordinate = {
            x: 0,
            y: 0
        };
        this.onResize = debounce(function (evt) {
            _this.calculateWidth();
        }, DURATION_DEBOUNCE_RESIZE);
    }

    CarouselNinjaContainer.prototype.calculateWidth = function calculateWidth() {
        var firstChild = this.refs['child-' + this.props.select];
        this.setState({
            innerWidth: firstChild.clientWidth
        });
    };

    CarouselNinjaContainer.prototype.onMouseDown = function onMouseDown(evt) {
        this.startCoordinate = {
            x: evt.clientX,
            y: evt.clientY
        };
        this.setState({
            dragging: true
        });
    };

    CarouselNinjaContainer.prototype.onMouseMove = function onMouseMove(evt) {
        if (!this.state.dragging) {
            return;
        }
        evt.preventDefault();
        this.setState({
            deltaX: evt.clientX - this.startCoordinate.x,
            deltaY: evt.clientY - this.startCoordinate.y
        });
    };

    CarouselNinjaContainer.prototype.onMouseUp = function onMouseUp(evt) {
        if (!this.state.dragging) {
            return;
        }
        this.handleSwipe();
    };

    CarouselNinjaContainer.prototype.onMouseLeave = function onMouseLeave(evt) {
        if (!this.state.dragging) {
            return;
        }
        this.handleSwipe();
    };

    CarouselNinjaContainer.prototype.provideMouseEventHandlers = function provideMouseEventHandlers() {
        return this.props.swipe ? {
            onMouseDown: this.onMouseDown.bind(this),
            onMouseMove: this.onMouseMove.bind(this),
            onMouseUp: this.onMouseUp.bind(this),
            onMouseLeave: this.onMouseLeave.bind(this)
        } : null;
    };

    CarouselNinjaContainer.prototype.handleSwipe = function handleSwipe() {
        var deltaAbsX = Math.abs(this.state.deltaX);
        var threshold = this.state.innerWidth * DELTA_PERCENTAGE_SWIPE;
        if (deltaAbsX > threshold) {
            var direction = this.state.deltaX > -1 ? DIRECTION_RIGHT : DIRECTION_LEFT;
            if (direction === DIRECTION_LEFT) {
                this.props.onSwipeLeft(this.props.select + 1);
            } else if (direction === DIRECTION_RIGHT) {
                this.props.onSwipeRight(this.props.select - 1);
            }
        }
        // reset
        this.startCoordinate = {
            x: 0,
            y: 0
        };
        this.setState({
            dragging: false,
            deltaX: 0,
            deltaY: 0
        });
    };

    CarouselNinjaContainer.prototype.componentDidMount = function componentDidMount() {
        this.calculateWidth();
        window.addEventListener('resize', this.onResize);
    };

    CarouselNinjaContainer.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
        if (this.props.onSelect) {
            this.props.onSelect(nextProps.select, this.props.select);
        }
    };

    CarouselNinjaContainer.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {
        return false || nextProps.select !== this.props.select || nextProps.children !== this.props.children || nextState !== this.state;
    };

    CarouselNinjaContainer.prototype.componentWillUnmount = function componentWillUnmount() {
        window.addEventListener('resize', this.onResize);
    };

    CarouselNinjaContainer.prototype.render = function render() {
        var _this2 = this;

        /**
         * 選択された要素が見た目上の中央であるとして、その右側と左側にあるべき要素を分類する
         *
         * @example this.props.children = [0, 1, 2, 3, 4]
         *          this.props.select   = 3
         */
        var children = React.Children.toArray(this.props.children);
        var halfSideSize = Math.floor(children.length / 2);
        // [0, 1, 2, *3*, 4] => [0, 1, 2]
        var leftward = children.slice(0, this.props.select);
        // [0, 1, 2, *3*, 4] => [4]
        var rightward = children.slice(this.props.select + 1, children.length);
        // 片側にある過剰分の要素を、もう片側に移して結合する
        if (leftward.length > halfSideSize) {
            // right:[4] + left:[0](, [1, 2]) => left:[1, 2]/ center:[3] / right:[4, 0]
            rightward = [].concat(rightward, leftward.splice(0, leftward.length - halfSideSize));
        } else if (rightward.length > halfSideSize) {
            // right:(2, 3, )[4] + left:[0] => left:[4, 0] / center:[1] / right:[2, 3]
            leftward = [].concat(rightward.splice(halfSideSize), leftward);
        }
        return React.createElement("div", React.__spread({ "className": 'CarouselNinjaContainer ' + (this.state.dragging ? 'CarouselNinjaContainer--dragging' : '') }, this.provideMouseEventHandlers()), children.map(function (child, i) {
            var isCenter = i === _this2.props.select;
            var isLeftEdge = false;
            var isRightEdge = false;
            var arrangedPos = undefined;
            var calcFunction = undefined;
            // TODO multiple translateX で表現できないか？ calc() があると IE10, IE11 で transition されない
            // TODO 50% のかわりに ラッパーのwidth / 2で実数計算するとか？
            // 左側・右側・中央のいずれに属しているかで位置の指定を変更する
            if ((arrangedPos = leftward.indexOf(child)) !== -1) {
                // Leftward [0=1920, 1=1280, 2=640] 左側は配列の始点に向けてオフセットを大きくとる
                var baseTranslateX = (leftward.length - arrangedPos) * _this2.state.innerWidth;
                calcFunction = 'calc(50% - ' + (baseTranslateX - _this2.state.deltaX) + 'px)';
                isLeftEdge = arrangedPos === 0;
            } else if ((arrangedPos = rightward.indexOf(child)) !== -1) {
                // Rightward [0=640, 1=1280, 2=1920] 右側は配列の終点に向けてオフセットを大きくとる
                var baseTranslateX = (arrangedPos + 1) * _this2.state.innerWidth;
                calcFunction = 'calc(50% + ' + (baseTranslateX + _this2.state.deltaX) + 'px)';
                isRightEdge = arrangedPos === rightward.length - 1;
            } else {
                // Center
                calcFunction = 'calc(50% + ' + (0 + _this2.state.deltaX) + 'px)';
            }
            var className = 'CarouselNinjaContainer__pane';
            className += isCenter ? _this2.props.activeClass : '';
            className += isRightEdge ? _this2.props.rightEdgeClass : '';
            className += isLeftEdge ? _this2.props.leftEdgeClass : '';
            var style = {
                left: calcFunction,
                marginLeft: '-' + _this2.state.innerWidth / 2 + 'px'
            };
            return React.createElement("div", { "ref": 'child-' + i, "className": className, "key": i, "style": style, "aria-hidden": isCenter ? 'false' : 'true' }, child);
        }));
    };

    return CarouselNinjaContainer;
})(React.Component);

exports['default'] = CarouselNinjaContainer;

CarouselNinjaContainer.defaultProps = {
    activeClass: ' is-active',
    rightEdgeClass: ' is-right',
    leftEdgeClass: ' is-left',
    select: 0,
    onSelect: function onSelect() {},
    onSwipeLeft: function onSwipeLeft() {},
    onSwipeRight: function onSwipeRight() {},
    swipe: false
};

},{"debounce":1,"react":undefined}],5:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var CarouselNinjaSelector = (function (_React$Component) {
    _inherits(CarouselNinjaSelector, _React$Component);

    function CarouselNinjaSelector() {
        _classCallCheck(this, CarouselNinjaSelector);

        _React$Component.apply(this, arguments);
    }

    CarouselNinjaSelector.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
        if (this.props.onSelect) {
            this.props.onSelect(nextProps.select, this.props.select);
        }
    };

    CarouselNinjaSelector.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {
        return false || nextProps.select !== this.props.select || nextProps.children !== this.props.children;
    };

    CarouselNinjaSelector.prototype.renderFromChildren = function renderFromChildren() {
        var _this = this;

        return React.Children.map(this.props.children, function (child, i) {
            var isSelectedChild = i === _this.props.select;
            var className = 'CarouselNinjaSelector__item';
            className += isSelectedChild ? _this.props.activeClass : '';
            return React.createElement("li", { "className": className, "key": i, "onClick": _this.props.onClickSelector.bind(_this, i), "aria-selected": isSelectedChild ? 'true' : 'false' }, child);
        });
    };

    CarouselNinjaSelector.prototype.renderItemsBySelf = function renderItemsBySelf() {
        var children = [],
            iz = this.props.length;
        for (var i = 0; i < iz; i++) {
            var isSelectedChild = i === this.props.select;
            var className = 'CarouselNinjaSelector__item';
            className += isSelectedChild ? this.props.activeClass : '';
            children.push(React.createElement("li", { "className": className, "key": i, "onClick": this.props.onClickSelector.bind(this, i), "aria-selected": isSelectedChild ? 'true' : 'false' }, React.createElement("button", { "tabIndex": -1 })));
        }
        return children;
    };

    CarouselNinjaSelector.prototype.render = function render() {
        return React.createElement("ul", { "className": "CarouselNinjaSelector" }, React.Children.count(this.props.children) ? this.renderFromChildren() : this.renderItemsBySelf());
    };

    return CarouselNinjaSelector;
})(React.Component);

exports['default'] = CarouselNinjaSelector;

CarouselNinjaSelector.defaultProps = {
    activeClass: ' is-active',
    select: 0,
    length: 0,
    onSelect: function onSelect() {},
    onClickSelector: function onClickSelector() {}
};

},{"react":undefined}],6:[function(require,module,exports){
/// <reference path="../typings/bundle.d.ts" />
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var _throttleit = require('throttleit');

var throttle = _throttleit;

var _CarouselNinjaContainer = require('./CarouselNinjaContainer');

var _CarouselNinjaSelector = require('./CarouselNinjaSelector');

var DURATION_THROTTLE_KEYUP = 150;
var KEYCODE_LEFT = 37;
var KEYCODE_RIGHT = 39;

var CarouselNinja = (function (_React$Component) {
    _inherits(CarouselNinja, _React$Component);

    function CarouselNinja() {
        var _this = this;

        _classCallCheck(this, CarouselNinja);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _React$Component.call.apply(_React$Component, [this].concat(args));
        this.state = {
            currentSelect: 2
        };
        this.onKeyUp = throttle(function (e) {
            switch (e.keyCode) {
                case KEYCODE_LEFT:
                    _this.updateSelect(_this.state.currentSelect - 1);
                    break;
                case KEYCODE_RIGHT:
                    _this.updateSelect(_this.state.currentSelect + 1);
                    break;
            }
        }, DURATION_THROTTLE_KEYUP);
    }

    CarouselNinja.prototype.updateSelect = function updateSelect(select) {
        var lastIndex = React.Children.count(this.props.children) - 1;
        if (select < 0) {
            this.setState({
                currentSelect: lastIndex
            });
        } else if (select > lastIndex) {
            this.setState({
                currentSelect: 0
            });
        } else {
            this.setState({
                currentSelect: select
            });
        }
    };

    CarouselNinja.prototype.onSelectChange = function onSelectChange(nextI, curtI) {
        this.props.onSelect(nextI, curtI);
    };

    CarouselNinja.prototype.onClickSelector = function onClickSelector(selectI) {
        this.updateSelect(selectI);
    };

    CarouselNinja.prototype.onSwipeLeft = function onSwipeLeft(nextI) {
        this.updateSelect(nextI);
    };

    CarouselNinja.prototype.onSwipeRight = function onSwipeRight(nextI) {
        this.updateSelect(nextI);
    };

    CarouselNinja.prototype.render = function render() {
        // TODO [aria-controls]
        return React.createElement("div", { "tabIndex": 0, "className": this.props.className, "onKeyUp": this.onKeyUp.bind(this) }, React.createElement(_CarouselNinjaContainer['default'], { "activeClass": this.props.activeClass, "select": this.state.currentSelect, "onSelect": this.onSelectChange.bind(this), "onSwipeLeft": this.onSwipeLeft.bind(this), "onSwipeRight": this.onSwipeRight.bind(this) }, this.props.children), React.createElement(_CarouselNinjaSelector['default'], { "activeClass": this.props.activeClass, "select": this.state.currentSelect, "length": React.Children.count(this.props.children), "onSelect": this.onSelectChange.bind(this), "onClickSelector": this.onClickSelector.bind(this) }));
    };

    return CarouselNinja;
})(React.Component);

CarouselNinja.defaultProps = {
    className: '',
    activeClass: ' is-active',
    onSelect: function onSelect() {}
};
exports.CarouselNinja = CarouselNinja;
exports.CarouselNinjaContainer = _CarouselNinjaContainer['default'];
exports.CarouselNinjaSelector = _CarouselNinjaSelector['default'];

},{"./CarouselNinjaContainer":4,"./CarouselNinjaSelector":5,"react":undefined,"throttleit":3}]},{},[6])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2Uvbm9kZV9tb2R1bGVzL2RhdGUtbm93L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Rocm90dGxlaXQvaW5kZXguanMiLCJzcmMvQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lci50c3giLCJzcmMvQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yLnRzeCIsInNyYy9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O3FCQ2hDdUIsT0FBTzs7SUFBbEIsS0FBSzs7d0JBRVMsVUFBVTs7SUFBeEIsUUFBUTs7QUFFcEIsSUFBTSx3QkFBd0IsR0FBRyxHQUFHLENBQUM7QUFDckMsSUFBTSxzQkFBc0IsR0FB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QUFJLENBQUMsS0FBSyxDQUFDLFdBQVksRUFBQSxRQUM5QixFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYyxFQUFBLFFBQzNCLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUUsRUFBQSxVQUMxQyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBRSxFQUFBLGlCQUMxQixFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBRSxFQUFBLENBQUcsQ0FDdkUsQ0FDTjtLQUNIOztXQTVFSCxhQUFBO0dBQTRCLEtBQUssQ0FBQyxTQUFTOztBQUVsQyxhQUFBLENBQUEsWUFBWSxHQUFHO0FBQ3BCLGFBQVMsRUFBSyxFQUFFO0FBQ2hCLGVBQVcsRUFBRyxZQUFZO0FBQzFCLFlBQVEsRUFBTSxvQkFBQSxFQUFRO0NBQ3ZCLENBdUVGO1FBR0MsYUFBYSxHQUFiLGFBQWE7UUFDYixzQkFBc0I7UUFDdEIscUJBQXFCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBub3cgPSByZXF1aXJlKCdkYXRlLW5vdycpO1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAqIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAqIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICogbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbiAqXG4gKiBAc291cmNlIHVuZGVyc2NvcmUuanNcbiAqIEBzZWUgaHR0cDovL3Vuc2NyaXB0YWJsZS5jb20vMjAwOS8wMy8yMC9kZWJvdW5jaW5nLWphdmFzY3JpcHQtbWV0aG9kcy9cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uIHRvIHdyYXBcbiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0IGluIG1zIChgMTAwYClcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2hldGhlciB0byBleGVjdXRlIGF0IHRoZSBiZWdpbm5pbmcgKGBmYWxzZWApXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKXtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICBpZiAobnVsbCA9PSB3YWl0KSB3YWl0ID0gMTAwO1xuXG4gIGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgIHZhciBsYXN0ID0gbm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+IDApIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBub3coKTtcbiAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykge1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gRGF0ZS5ub3cgfHwgbm93XG5cbmZ1bmN0aW9uIG5vdygpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKClcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gdGhyb3R0bGU7XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBmdW5jdGlvbiB0aGF0LCB3aGVuIGludm9rZWQsIGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXIgYHdhaXRgIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIEZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge051bWJlcn0gd2FpdCBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgbXVzdCBlbGFwc2UgYmV0d2VlbiBgZnVuY2AgaW52b2NhdGlvbnMuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBuZXcgZnVuY3Rpb24gdGhhdCB3cmFwcyB0aGUgYGZ1bmNgIGZ1bmN0aW9uIHBhc3NlZCBpbi5cbiAqL1xuXG5mdW5jdGlvbiB0aHJvdHRsZSAoZnVuYywgd2FpdCkge1xuICB2YXIgY3R4LCBhcmdzLCBydG4sIHRpbWVvdXRJRDsgLy8gY2FjaGluZ1xuICB2YXIgbGFzdCA9IDA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHRocm90dGxlZCAoKSB7XG4gICAgY3R4ID0gdGhpcztcbiAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBkZWx0YSA9IG5ldyBEYXRlKCkgLSBsYXN0O1xuICAgIGlmICghdGltZW91dElEKVxuICAgICAgaWYgKGRlbHRhID49IHdhaXQpIGNhbGwoKTtcbiAgICAgIGVsc2UgdGltZW91dElEID0gc2V0VGltZW91dChjYWxsLCB3YWl0IC0gZGVsdGEpO1xuICAgIHJldHVybiBydG47XG4gIH07XG5cbiAgZnVuY3Rpb24gY2FsbCAoKSB7XG4gICAgdGltZW91dElEID0gMDtcbiAgICBsYXN0ID0gK25ldyBEYXRlKCk7XG4gICAgcnRuID0gZnVuYy5hcHBseShjdHgsIGFyZ3MpO1xuICAgIGN0eCA9IG51bGw7XG4gICAgYXJncyA9IG51bGw7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgKiBhcyBkZWJvdW5jZSBmcm9tICdkZWJvdW5jZSc7XG5cbmNvbnN0IERVUkFUSU9OX0RFQk9VTkNFX1JFU0laRSA9IDMwMDtcbmNvbnN0IERFTFRBX1BFUkNFTlRBR0VfU1dJUEUgICA9IC4yO1xuXG5jb25zdCBESVJFQ1RJT05fUklHSFQgPSAwO1xuY29uc3QgRElSRUNUSU9OX0xFRlQgID0gMTtcblxuaW50ZXJmYWNlIENhcm91c2VsTmluamFDb250YWluZXJQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPENhcm91c2VsTmluamFDb250YWluZXI+IHtcbiAgYWN0aXZlQ2xhc3M/OiBzdHJpbmc7XG4gIHJpZ2h0RWRnZUNsYXNzPzogc3RyaW5nO1xuICBsZWZ0RWRnZUNsYXNzPzogc3RyaW5nO1xuICBzZWxlY3Q6IG51bWJlcjtcbiAgb25TZWxlY3Q/IDogKG5leHRJOiBudW1iZXIsIGN1cnRJOiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uU3dpcGVMZWZ0PyA6IChuZXh0STogbnVtYmVyKSA9PiB2b2lkO1xuICBvblN3aXBlUmlnaHQ/IDogKG5leHRJOiBudW1iZXIpID0+IHZvaWQ7XG4gIHN3aXBlPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENhcm91c2VsTmluamFDb250YWluZXJTdGF0ZSB7XG4gIGlubmVyV2lkdGg/OiBudW1iZXI7XG4gIGRyYWdnaW5nPzogYm9vbGVhbjtcbiAgZGVsdGFYPzogbnVtYmVyO1xuICBkZWx0YVk/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcm91c2VsTmluamFDb250YWluZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Q2Fyb3VzZWxOaW5qYUNvbnRhaW5lclByb3BzLCBDYXJvdXNlbE5pbmphQ29udGFpbmVyU3RhdGU+IHtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGFjdGl2ZUNsYXNzICAgIDogJyBpcy1hY3RpdmUnLFxuICAgIHJpZ2h0RWRnZUNsYXNzIDogJyBpcy1yaWdodCcsXG4gICAgbGVmdEVkZ2VDbGFzcyAgOiAnIGlzLWxlZnQnLFxuICAgIHNlbGVjdCAgICAgICAgIDogMCxcbiAgICBvblNlbGVjdCAgICAgICA6ICgpID0+IHt9LFxuICAgIG9uU3dpcGVMZWZ0ICAgIDogKCkgPT4ge30sXG4gICAgb25Td2lwZVJpZ2h0ICAgOiAoKSA9PiB7fSxcbiAgICBzd2lwZSAgICAgICAgICA6IGZhbHNlXG4gIH07XG5cbiAgc3RhdGUgPSB7XG4gICAgb3V0ZXJXaWR0aCA6IDAsXG4gICAgaW5uZXJXaWR0aCA6IDAsXG4gICAgZHJhZ2dpbmcgICA6IGZhbHNlLFxuICAgIGRlbHRhWCAgICAgOiAwLFxuICAgIGRlbHRhWSAgICAgOiAwXG4gIH07XG5cbiAgc3RhcnRDb29yZGluYXRlOiB7XG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICB9ID0ge1xuICAgIHggOiAwLFxuICAgIHkgOiAwXG4gIH07XG5cbiAgY2FsY3VsYXRlV2lkdGgoKSB7XG4gICAgY29uc3QgZmlyc3RDaGlsZDogRWxlbWVudCA9IHRoaXMucmVmc1tgY2hpbGQtJHt0aGlzLnByb3BzLnNlbGVjdH1gXSBhcyBhbnk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpbm5lcldpZHRoIDogZmlyc3RDaGlsZC5jbGllbnRXaWR0aFxuICAgIH0pO1xuICB9XG5cbiAgb25Nb3VzZURvd24oZXZ0OiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5zdGFydENvb3JkaW5hdGUgPSB7XG4gICAgICB4IDogZXZ0LmNsaWVudFgsXG4gICAgICB5IDogZXZ0LmNsaWVudFlcbiAgICB9O1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhZ2dpbmcgICA6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIG9uTW91c2VNb3ZlKGV2dDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRlbHRhWCA6IGV2dC5jbGllbnRYIC0gdGhpcy5zdGFydENvb3JkaW5hdGUueCxcbiAgICAgIGRlbHRhWSA6IGV2dC5jbGllbnRZIC0gdGhpcy5zdGFydENvb3JkaW5hdGUueVxuICAgIH0pO1xuICB9XG5cbiAgb25Nb3VzZVVwKGV2dDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZVN3aXBlKCk7XG4gIH1cblxuICBvbk1vdXNlTGVhdmUoZXZ0OiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlU3dpcGUoKTtcbiAgfVxuXG4gIHByb3ZpZGVNb3VzZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuc3dpcGUgPyB7XG4gICAgICBvbk1vdXNlRG93biAgOiB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyksXG4gICAgICBvbk1vdXNlTW92ZSAgOiB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyksXG4gICAgICBvbk1vdXNlVXAgICAgOiB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpLFxuICAgICAgb25Nb3VzZUxlYXZlIDogdGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKVxuICAgIH0gOiBudWxsO1xuICB9XG5cbiAgaGFuZGxlU3dpcGUoKSB7XG4gICAgY29uc3QgZGVsdGFBYnNYID0gTWF0aC5hYnModGhpcy5zdGF0ZS5kZWx0YVgpO1xuICAgIGNvbnN0IHRocmVzaG9sZCA9IHRoaXMuc3RhdGUuaW5uZXJXaWR0aCAqIERFTFRBX1BFUkNFTlRBR0VfU1dJUEU7XG5cbiAgICBpZiAoZGVsdGFBYnNYID4gdGhyZXNob2xkKSB7XG5cbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuc3RhdGUuZGVsdGFYID4gLTEgPyBESVJFQ1RJT05fUklHSFQgOiBESVJFQ1RJT05fTEVGVDtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OX0xFRlQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblN3aXBlTGVmdCh0aGlzLnByb3BzLnNlbGVjdCArIDEpO1xuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IERJUkVDVElPTl9SSUdIVCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uU3dpcGVSaWdodCh0aGlzLnByb3BzLnNlbGVjdCAtIDEpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgLy8gcmVzZXRcbiAgICB0aGlzLnN0YXJ0Q29vcmRpbmF0ZSA9IHtcbiAgICAgIHggOiAwLFxuICAgICAgeSA6IDBcbiAgICB9O1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhZ2dpbmcgOiBmYWxzZSxcbiAgICAgIGRlbHRhWCAgIDogMCxcbiAgICAgIGRlbHRhWSAgIDogMFxuICAgIH0pO1xuICB9XG5cbiAgb25SZXNpemUgPSBkZWJvdW5jZSgoZXZ0OiBFdmVudCkgPT4ge1xuICAgIHRoaXMuY2FsY3VsYXRlV2lkdGgoKTtcbiAgfSwgRFVSQVRJT05fREVCT1VOQ0VfUkVTSVpFKTtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhbGN1bGF0ZVdpZHRoKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IENhcm91c2VsTmluamFDb250YWluZXJQcm9wcykge1xuICAgIGlmICh0aGlzLnByb3BzLm9uU2VsZWN0KSB7XG4gICAgICB0aGlzLnByb3BzLm9uU2VsZWN0KG5leHRQcm9wcy5zZWxlY3QsIHRoaXMucHJvcHMuc2VsZWN0KTtcbiAgICB9XG4gIH1cblxuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzOiBDYXJvdXNlbE5pbmphQ29udGFpbmVyUHJvcHMsIG5leHRTdGF0ZTogQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lclN0YXRlKSB7XG4gICAgcmV0dXJuIGZhbHNlIHx8XG4gICAgICBuZXh0UHJvcHMuc2VsZWN0ICE9PSB0aGlzLnByb3BzLnNlbGVjdCB8fFxuICAgICAgbmV4dFByb3BzLmNoaWxkcmVuICE9PSB0aGlzLnByb3BzLmNoaWxkcmVuIHx8XG4gICAgICBuZXh0U3RhdGUgIT09IHRoaXMuc3RhdGVcbiAgICA7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgLyoqXG4gICAgICog6YG45oqe44GV44KM44Gf6KaB57Sg44GM6KaL44Gf55uu5LiK44Gu5Lit5aSu44Gn44GC44KL44Go44GX44Gm44CB44Gd44Gu5Y+z5YG044Go5bem5YG044Gr44GC44KL44G544GN6KaB57Sg44KS5YiG6aGe44GZ44KLXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSB0aGlzLnByb3BzLmNoaWxkcmVuID0gWzAsIDEsIDIsIDMsIDRdXG4gICAgICogICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3QgICA9IDNcbiAgICAgKi9cbiAgICBjb25zdCBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlW10gPSAoUmVhY3QuQ2hpbGRyZW4gYXMgYW55KS50b0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICAgIGNvbnN0IGhhbGZTaWRlU2l6ZSA9IE1hdGguZmxvb3IoY2hpbGRyZW4ubGVuZ3RoIC8gMik7XG5cbiAgICAvLyBbMCwgMSwgMiwgKjMqLCA0XSA9PiBbMCwgMSwgMl1cbiAgICBsZXQgbGVmdHdhcmQgPSBjaGlsZHJlbi5zbGljZSgwLCB0aGlzLnByb3BzLnNlbGVjdCk7XG4gICAgLy8gWzAsIDEsIDIsICozKiwgNF0gPT4gWzRdXG4gICAgbGV0IHJpZ2h0d2FyZCA9IGNoaWxkcmVuLnNsaWNlKHRoaXMucHJvcHMuc2VsZWN0ICsgMSwgY2hpbGRyZW4ubGVuZ3RoKTtcblxuICAgIC8vIOeJh+WBtOOBq+OBguOCi+mBjuWJsOWIhuOBruimgee0oOOCkuOAgeOCguOBhueJh+WBtOOBq+enu+OBl+OBpue1kOWQiOOBmeOCi1xuICAgIGlmIChsZWZ0d2FyZC5sZW5ndGggPiBoYWxmU2lkZVNpemUpIHtcbiAgICAgIC8vIHJpZ2h0Ols0XSArIGxlZnQ6WzBdKCwgWzEsIDJdKSA9PiBsZWZ0OlsxLCAyXS8gY2VudGVyOlszXSAvIHJpZ2h0Ols0LCAwXVxuICAgICAgcmlnaHR3YXJkID0gW10uY29uY2F0KHJpZ2h0d2FyZCwgbGVmdHdhcmQuc3BsaWNlKDAsIGxlZnR3YXJkLmxlbmd0aCAtIGhhbGZTaWRlU2l6ZSkpO1xuICAgIH0gZWxzZSBpZiAocmlnaHR3YXJkLmxlbmd0aCA+IGhhbGZTaWRlU2l6ZSkge1xuICAgICAgLy8gcmlnaHQ6KDIsIDMsIClbNF0gKyBsZWZ0OlswXSA9PiBsZWZ0Ols0LCAwXSAvIGNlbnRlcjpbMV0gLyByaWdodDpbMiwgM11cbiAgICAgIGxlZnR3YXJkID0gW10uY29uY2F0KHJpZ2h0d2FyZC5zcGxpY2UoaGFsZlNpZGVTaXplKSwgbGVmdHdhcmQpO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lciAke3RoaXMuc3RhdGUuZHJhZ2dpbmcgPyAnQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lci0tZHJhZ2dpbmcnIDogJyd9YH1cbiAgICAgICAgICAgICB7Li4udGhpcy5wcm92aWRlTW91c2VFdmVudEhhbmRsZXJzKCl9PlxuXG4gICAgICAgICAge2NoaWxkcmVuLm1hcCgoY2hpbGQ6IFJlYWN0LlJlYWN0Tm9kZSwgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0NlbnRlciA9IChpID09PSB0aGlzLnByb3BzLnNlbGVjdCk7XG4gICAgICAgICAgICBsZXQgaXNMZWZ0RWRnZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGlzUmlnaHRFZGdlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGxldCBhcnJhbmdlZFBvczogbnVtYmVyO1xuICAgICAgICAgICAgbGV0IGNhbGNGdW5jdGlvbjogc3RyaW5nO1xuXG4gICAgICAgICAgICAvLyBUT0RPIG11bHRpcGxlIHRyYW5zbGF0ZVgg44Gn6KGo54++44Gn44GN44Gq44GE44GL77yfIGNhbGMoKSDjgYzjgYLjgovjgaggSUUxMCwgSUUxMSDjgacgdHJhbnNpdGlvbiDjgZXjgozjgarjgYRcbiAgICAgICAgICAgIC8vIFRPRE8gNTAlIOOBruOBi+OCj+OCiuOBqyDjg6njg4Pjg5Hjg7zjga53aWR0aCAvIDLjgaflrp/mlbDoqIjnrpfjgZnjgovjgajjgYvvvJ9cbiAgICAgICAgICAgIC8vIOW3puWBtOODu+WPs+WBtOODu+S4reWkruOBruOBhOOBmuOCjOOBq+WxnuOBl+OBpuOBhOOCi+OBi+OBp+S9jee9ruOBruaMh+WumuOCkuWkieabtOOBmeOCi1xuICAgICAgICAgICAgaWYgKChhcnJhbmdlZFBvcyA9IGxlZnR3YXJkLmluZGV4T2YoY2hpbGQpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgLy8gTGVmdHdhcmQgWzA9MTkyMCwgMT0xMjgwLCAyPTY0MF0g5bem5YG044Gv6YWN5YiX44Gu5aeL54K544Gr5ZCR44GR44Gm44Kq44OV44K744OD44OI44KS5aSn44GN44GP44Go44KLXG4gICAgICAgICAgICAgIGxldCBiYXNlVHJhbnNsYXRlWCA9IChsZWZ0d2FyZC5sZW5ndGggLSBhcnJhbmdlZFBvcykgKiB0aGlzLnN0YXRlLmlubmVyV2lkdGhcbiAgICAgICAgICAgICAgY2FsY0Z1bmN0aW9uID0gYGNhbGMoNTAlIC0gJHtiYXNlVHJhbnNsYXRlWCAtIHRoaXMuc3RhdGUuZGVsdGFYfXB4KWA7XG4gICAgICAgICAgICAgIGlzTGVmdEVkZ2UgPSBhcnJhbmdlZFBvcyA9PT0gMDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFycmFuZ2VkUG9zID0gcmlnaHR3YXJkLmluZGV4T2YoY2hpbGQpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgLy8gUmlnaHR3YXJkIFswPTY0MCwgMT0xMjgwLCAyPTE5MjBdIOWPs+WBtOOBr+mFjeWIl+OBrue1gueCueOBq+WQkeOBkeOBpuOCquODleOCu+ODg+ODiOOCkuWkp+OBjeOBj+OBqOOCi1xuICAgICAgICAgICAgICBsZXQgYmFzZVRyYW5zbGF0ZVggPSAoYXJyYW5nZWRQb3MgKyAxKSAqIHRoaXMuc3RhdGUuaW5uZXJXaWR0aFxuICAgICAgICAgICAgICBjYWxjRnVuY3Rpb24gPSBgY2FsYyg1MCUgKyAke2Jhc2VUcmFuc2xhdGVYICsgdGhpcy5zdGF0ZS5kZWx0YVh9cHgpYDtcbiAgICAgICAgICAgICAgaXNSaWdodEVkZ2UgPSBhcnJhbmdlZFBvcyA9PT0gcmlnaHR3YXJkLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBDZW50ZXJcbiAgICAgICAgICAgICAgY2FsY0Z1bmN0aW9uID0gYGNhbGMoNTAlICsgJHswICsgdGhpcy5zdGF0ZS5kZWx0YVh9cHgpYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9ICdDYXJvdXNlbE5pbmphQ29udGFpbmVyX19wYW5lJztcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSBpc0NlbnRlciAgICA/IHRoaXMucHJvcHMuYWN0aXZlQ2xhc3MgICAgOiAnJztcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSBpc1JpZ2h0RWRnZSA/IHRoaXMucHJvcHMucmlnaHRFZGdlQ2xhc3MgOiAnJztcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSBpc0xlZnRFZGdlICA/IHRoaXMucHJvcHMubGVmdEVkZ2VDbGFzcyAgOiAnJztcblxuICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSB7XG4gICAgICAgICAgICAgIGxlZnQgICAgICAgOiBjYWxjRnVuY3Rpb24sXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQgOiBgLSR7dGhpcy5zdGF0ZS5pbm5lcldpZHRoIC8gMn1weGBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiA8ZGl2IHJlZj17YGNoaWxkLSR7aX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj17aXNDZW50ZXIgPyAnZmFsc2UnIDogJ3RydWUnfT57Y2hpbGR9PC9kaXY+O1xuICAgICAgICAgIH0pfVxuXG4gICAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdEVsZW1lbnQgPSBfX1JlYWN0LlJlYWN0RWxlbWVudDtcblxuaW50ZXJmYWNlIENhcm91c2VsU2VsZWN0b3JQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPENhcm91c2VsTmluamFTZWxlY3Rvcj4ge1xuICBhY3RpdmVDbGFzcz86IHN0cmluZztcbiAgc2VsZWN0OiBudW1iZXI7XG4gIGxlbmd0aDogbnVtYmVyO1xuICBvblNlbGVjdD86IChwcmV2STogbnVtYmVyLCBuZXh0STogbnVtYmVyKSA9PiB2b2lkO1xuICBvbkNsaWNrU2VsZWN0b3I/OiAoc2VsZWN0STogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJvdXNlbE5pbmphU2VsZWN0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Q2Fyb3VzZWxTZWxlY3RvclByb3BzLCBhbnk+IHtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGFjdGl2ZUNsYXNzICAgICA6ICcgaXMtYWN0aXZlJyxcbiAgICBzZWxlY3QgICAgICAgICAgOiAwLFxuICAgIGxlbmd0aCAgICAgICAgICA6IDAsXG4gICAgb25TZWxlY3QgICAgICAgIDogKCkgPT4ge30sXG4gICAgb25DbGlja1NlbGVjdG9yIDogKCkgPT4ge30sXG4gIH07XG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IENhcm91c2VsU2VsZWN0b3JQcm9wcykge1xuICAgIGlmICh0aGlzLnByb3BzLm9uU2VsZWN0KSB7XG4gICAgICB0aGlzLnByb3BzLm9uU2VsZWN0KG5leHRQcm9wcy5zZWxlY3QsIHRoaXMucHJvcHMuc2VsZWN0KTtcbiAgICB9XG4gIH1cblxuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzOiBDYXJvdXNlbFNlbGVjdG9yUHJvcHMpIHtcbiAgICByZXR1cm4gZmFsc2UgfHxcbiAgICAgIG5leHRQcm9wcy5zZWxlY3QgIT09IHRoaXMucHJvcHMuc2VsZWN0IHx8XG4gICAgICBuZXh0UHJvcHMuY2hpbGRyZW4gIT09IHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICA7XG4gIH1cblxuICByZW5kZXJGcm9tQ2hpbGRyZW4oKSB7XG4gICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLm1hcCh0aGlzLnByb3BzLmNoaWxkcmVuLCAoY2hpbGQ6IFJlYWN0LlJlYWN0Tm9kZSwgaTogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkQ2hpbGQgPSBpID09PSB0aGlzLnByb3BzLnNlbGVjdDtcbiAgICAgIGxldCBjbGFzc05hbWUgPSAnQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yX19pdGVtJztcbiAgICAgIGNsYXNzTmFtZSArPSBpc1NlbGVjdGVkQ2hpbGQgPyB0aGlzLnByb3BzLmFjdGl2ZUNsYXNzIDogJyc7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8bGkgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2tTZWxlY3Rvci5iaW5kKHRoaXMsIGkpfVxuICAgICAgICAgICAgYXJpYS1zZWxlY3RlZD17aXNTZWxlY3RlZENoaWxkID8gJ3RydWUnIDogJ2ZhbHNlJ30+XG4gICAgICAgICAge2NoaWxkfVxuICAgICAgICA8L2xpPlxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zQnlTZWxmKCkge1xuICAgIGNvbnN0IGNoaWxkcmVuOiBSZWFjdEVsZW1lbnQ8YW55PltdID0gW10sIGl6ID0gdGhpcy5wcm9wcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpejsgaSsrKSB7XG4gICAgICBsZXQgaXNTZWxlY3RlZENoaWxkID0gaSA9PT0gdGhpcy5wcm9wcy5zZWxlY3Q7XG4gICAgICBsZXQgY2xhc3NOYW1lID0gJ0Nhcm91c2VsTmluamFTZWxlY3Rvcl9faXRlbSc7XG4gICAgICBjbGFzc05hbWUgKz0gaXNTZWxlY3RlZENoaWxkID8gdGhpcy5wcm9wcy5hY3RpdmVDbGFzcyA6ICcnO1xuICAgICAgY2hpbGRyZW4ucHVzaCgoXG4gICAgICAgIDxsaSBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGlja1NlbGVjdG9yLmJpbmQodGhpcywgaSl9XG4gICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXtpc1NlbGVjdGVkQ2hpbGQgPyAndHJ1ZScgOiAnZmFsc2UnfT5cbiAgICAgICAgICA8YnV0dG9uIHRhYkluZGV4PXstMX0gLz5cbiAgICAgICAgPC9saT5cbiAgICAgICkpXG4gICAgfVxuICAgIHJldHVybiBjaGlsZHJlblxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8dWwgY2xhc3NOYW1lPVwiQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yXCI+XG4gICAgICAgIHtSZWFjdC5DaGlsZHJlbi5jb3VudCh0aGlzLnByb3BzLmNoaWxkcmVuKSA/IHRoaXMucmVuZGVyRnJvbUNoaWxkcmVuKCkgOiB0aGlzLnJlbmRlckl0ZW1zQnlTZWxmKCl9XG4gICAgICA8L3VsPlxuICAgICk7XG4gIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2J1bmRsZS5kLnRzXCIgLz5cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCAqIGFzIHRocm90dGxlIGZyb20gJ3Rocm90dGxlaXQnO1xuaW1wb3J0IENhcm91c2VsTmluamFDb250YWluZXIgZnJvbSAnLi9DYXJvdXNlbE5pbmphQ29udGFpbmVyJztcbmltcG9ydCBDYXJvdXNlbE5pbmphU2VsZWN0b3IgZnJvbSAnLi9DYXJvdXNlbE5pbmphU2VsZWN0b3InO1xuXG5jb25zdCBEVVJBVElPTl9USFJPVFRMRV9LRVlVUCA9IDE1MDtcblxuY29uc3QgS0VZQ09ERV9MRUZUICA9IDM3O1xuY29uc3QgS0VZQ09ERV9SSUdIVCA9IDM5O1xuXG5pbnRlcmZhY2UgQ2Fyb3VzZWxOaW5qYVByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8Q2Fyb3VzZWxOaW5qYT4ge1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIGFjdGl2ZUNsYXNzPzogc3RyaW5nO1xuICBvblNlbGVjdD86IChwcmV2STogbnVtYmVyLCBuZXh0STogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5jbGFzcyBDYXJvdXNlbE5pbmphIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PENhcm91c2VsTmluamFQcm9wcywgYW55PiB7XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBjbGFzc05hbWUgICA6ICcnLFxuICAgIGFjdGl2ZUNsYXNzIDogJyBpcy1hY3RpdmUnLFxuICAgIG9uU2VsZWN0ICAgIDogKCkgPT4ge30sXG4gIH07XG5cbiAgc3RhdGUgPSB7XG4gICAgY3VycmVudFNlbGVjdCA6IDJcbiAgfTtcblxuICB1cGRhdGVTZWxlY3Qoc2VsZWN0OiBudW1iZXIpIHtcbiAgICBjb25zdCBsYXN0SW5kZXggPSBSZWFjdC5DaGlsZHJlbi5jb3VudCh0aGlzLnByb3BzLmNoaWxkcmVuKSAtIDE7XG4gICAgaWYgKHNlbGVjdCA8IDApIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjdXJyZW50U2VsZWN0IDogbGFzdEluZGV4XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdCA+IGxhc3RJbmRleCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGN1cnJlbnRTZWxlY3QgOiAwXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGN1cnJlbnRTZWxlY3QgOiBzZWxlY3RcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9uS2V5VXAgPSB0aHJvdHRsZSgoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIHN3aXRjaChlLmtleUNvZGUpIHtcbiAgICAgIGNhc2UgS0VZQ09ERV9MRUZUOlxuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3QgLSAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEtFWUNPREVfUklHSFQ6XG4gICAgICAgIHRoaXMudXBkYXRlU2VsZWN0KHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdCArIDEpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sIERVUkFUSU9OX1RIUk9UVExFX0tFWVVQKTtcblxuICBvblNlbGVjdENoYW5nZShuZXh0STogbnVtYmVyLCBjdXJ0STogbnVtYmVyKSB7XG4gICAgdGhpcy5wcm9wcy5vblNlbGVjdChuZXh0SSwgY3VydEkpO1xuICB9XG5cbiAgb25DbGlja1NlbGVjdG9yKHNlbGVjdEk6IG51bWJlcikge1xuICAgIHRoaXMudXBkYXRlU2VsZWN0KHNlbGVjdEkpO1xuICB9XG5cbiAgb25Td2lwZUxlZnQobmV4dEk6IG51bWJlcikge1xuICAgIHRoaXMudXBkYXRlU2VsZWN0KG5leHRJKTtcbiAgfVxuXG4gIG9uU3dpcGVSaWdodChuZXh0STogbnVtYmVyKSB7XG4gICAgdGhpcy51cGRhdGVTZWxlY3QobmV4dEkpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIFRPRE8gW2FyaWEtY29udHJvbHNdXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiB0YWJJbmRleD17MH0gY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX0gb25LZXlVcD17dGhpcy5vbktleVVwLmJpbmQodGhpcyl9PlxuICAgICAgICA8Q2Fyb3VzZWxOaW5qYUNvbnRhaW5lciBhY3RpdmVDbGFzcz17dGhpcy5wcm9wcy5hY3RpdmVDbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0PXt0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXt0aGlzLm9uU2VsZWN0Q2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3dpcGVMZWZ0PXt0aGlzLm9uU3dpcGVMZWZ0LmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3dpcGVSaWdodD17dGhpcy5vblN3aXBlUmlnaHQuYmluZCh0aGlzKX0+XG4gICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgIDwvQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lcj5cblxuICAgICAgICA8Q2Fyb3VzZWxOaW5qYVNlbGVjdG9yIGFjdGl2ZUNsYXNzPXt0aGlzLnByb3BzLmFjdGl2ZUNsYXNzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdD17dGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aD17UmVhY3QuQ2hpbGRyZW4uY291bnQodGhpcy5wcm9wcy5jaGlsZHJlbil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9e3RoaXMub25TZWxlY3RDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrU2VsZWN0b3I9e3RoaXMub25DbGlja1NlbGVjdG9yLmJpbmQodGhpcyl9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIENhcm91c2VsTmluamEsXG4gIENhcm91c2VsTmluamFDb250YWluZXIsXG4gIENhcm91c2VsTmluamFTZWxlY3RvclxufTtcbiJdfQ==
