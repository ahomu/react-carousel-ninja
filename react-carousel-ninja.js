/**
 * Modules in this bundle
 * @license
 * 
 * react-carousel-ninja:
 *   license: MIT
 *   author: ahomu
 *   homepage: https://github.com/ahomu/react-carousel-ninja
 *   version: 0.1.3
 * 
 * date-now:
 *   licenses: MIT
 *   author: Raynos <raynos2@gmail.com>
 *   maintainers: raynos <raynos2@gmail.com>
 *   contributors: Artem Shoobovych
 *   homepage: https://github.com/Raynos/date-now
 *   version: 1.0.1
 * 
 * debounce:
 *   license: MIT
 *   maintainers: mattmueller <mattmuelle@gmail.com>, jongleberry <jonathanrichardong@gmail.com>, tootallnate <nathan@tootallnate.net>, clintwood <clint@anotherway.co.za>, thehydroimpulse <dnfagnan@gmail.com>, tjholowaychuk <tj@vision-media.ca>, rauchg <rauchg@gmail.com>, retrofox <rdsuarez@gmail.com>, coreh <thecoreh@gmail.com>, forbeslindesay <forbes@lindesay.co.uk>, kelonye <kelonyemitchel@gmail.com>, yields <yields@icloud.com>, anthonyshort <antshort@gmail.com>, ianstormtaylor <ian@ianstormtaylor.com>, cristiandouce <cristian@gravityonmars.com>, swatinem <arpad.borsos@googlemail.com>, stagas <gstagas@gmail.com>, amasad <amjad.masad@gmail.com>, juliangruber <julian@juliangruber.com>, shtylman <shtylman@gmail.com>, calvinfo <calvin@calv.info>, dominicbarnes <dominic@dbarnes.info>, timoxley <secoif@gmail.com>, stephenmathieson <me@stephenmathieson.com>, trevorgerhardt <trevorgerhardt@gmail.com>
 *   homepage: https://github.com/component/debounce
 *   version: 1.0.0
 * 
 * throttleit:
 *   license: MIT
 *   maintainers: tjholowaychuk <tj@vision-media.ca>, tootallnate <nathan@tootallnate.net>, rauchg <rauchg@gmail.com>, retrofox <rdsuarez@gmail.com>, coreh <thecoreh@gmail.com>, forbeslindesay <forbes@lindesay.co.uk>, kelonye <kelonyemitchel@gmail.com>, mattmueller <mattmuelle@gmail.com>, yields <yields@icloud.com>, anthonyshort <antshort@gmail.com>, jongleberry <jonathanrichardong@gmail.com>, ianstormtaylor <ian@ianstormtaylor.com>, cristiandouce <cristian@gravityonmars.com>, swatinem <arpad.borsos@googlemail.com>, stagas <gstagas@gmail.com>, amasad <amjad.masad@gmail.com>, juliangruber <julian@juliangruber.com>, shtylman <shtylman@gmail.com>, calvinfo <calvin@calv.info>, dominicbarnes <dominic@dbarnes.info>, stephenmathieson <me@stephenmathieson.com>, trevorgerhardt <trevorgerhardt@gmail.com>, timaschew <timaschew@gmail.com>, hughsk <hughskennedy@gmail.com>
 *   homepage: https://github.com/component/throttle
 *   version: 1.0.0
 * 
 * undefined:
 * 
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

/**
 * Module dependencies.
 */

var now = require('date-now');

/**
 * Returns a function, that, as long as it continues to be invoked, will not
 * be triggered. The function will be called after it stops being called for
 * N milliseconds. If `immediate` is passed, trigger the function on the
 * leading edge, instead of the trailing.
 *
 * @source underscore.js
 * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/
 * @param {Function} function to wrap
 * @param {Number} timeout in ms (`100`)
 * @param {Boolean} whether to execute at the beginning (`false`)
 * @api public
 */

module.exports = function debounce(func, wait, immediate){
  var timeout, args, context, timestamp, result;
  if (null == wait) wait = 100;

  function later() {
    var last = now() - timestamp;

    if (last < wait && last > 0) {
      timeout = setTimeout(later, wait - last);
    } else {
      timeout = null;
      if (!immediate) {
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      }
    }
  };

  return function debounced() {
    context = this;
    args = arguments;
    timestamp = now();
    var callNow = immediate && !timeout;
    if (!timeout) timeout = setTimeout(later, wait);
    if (callNow) {
      result = func.apply(context, args);
      context = args = null;
    }

    return result;
  };
};

},{"date-now":2}],2:[function(require,module,exports){
module.exports = Date.now || now

function now() {
    return new Date().getTime()
}

},{}],3:[function(require,module,exports){
module.exports = throttle;

/**
 * Returns a new function that, when invoked, invokes `func` at most once per `wait` milliseconds.
 *
 * @param {Function} func Function to wrap.
 * @param {Number} wait Number of milliseconds that must elapse between `func` invocations.
 * @return {Function} A new function that wraps the `func` function passed in.
 */

function throttle (func, wait) {
  var ctx, args, rtn, timeoutID; // caching
  var last = 0;

  return function throttled () {
    ctx = this;
    args = arguments;
    var delta = new Date() - last;
    if (!timeoutID)
      if (delta >= wait) call();
      else timeoutID = setTimeout(call, wait - delta);
    return rtn;
  };

  function call () {
    timeoutID = 0;
    last = +new Date();
    rtn = func.apply(ctx, args);
    ctx = null;
    args = null;
  }
}

},{}],4:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var _debounce = require('debounce');

var debounce = _debounce;

var DURATION_DEBOUNCE_RESIZE = 300;
var DELTA_PERCENTAGE_SWIPE = .2;
var DIRECTION_RIGHT = 0;
var DIRECTION_LEFT = 1;

var CarouselNinjaContainer = (function (_React$Component) {
    _inherits(CarouselNinjaContainer, _React$Component);

    function CarouselNinjaContainer() {
        var _this = this;

        _classCallCheck(this, CarouselNinjaContainer);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _React$Component.call.apply(_React$Component, [this].concat(args));
        this.state = {
            outerWidth: 0,
            innerWidth: 0,
            dragging: false,
            deltaX: 0,
            deltaY: 0
        };
        this._isMounted = false;
        this.startCoordinate = {
            x: 0,
            y: 0
        };
        this.onResize = debounce(function (evt) {
            _this.calculateWidth();
        }, DURATION_DEBOUNCE_RESIZE);
    }

    CarouselNinjaContainer.prototype.calculateWidth = function calculateWidth() {
        var firstChild = this.refs['child-' + this.props.select];
        this.setState({
            innerWidth: firstChild.clientWidth
        });
    };

    CarouselNinjaContainer.prototype.onMouseDown = function onMouseDown(evt) {
        this.startCoordinate = {
            x: evt.clientX,
            y: evt.clientY
        };
        this.setState({
            dragging: true
        });
    };

    CarouselNinjaContainer.prototype.onMouseMove = function onMouseMove(evt) {
        if (!this.state.dragging) {
            return;
        }
        evt.preventDefault();
        this.setState({
            deltaX: evt.clientX - this.startCoordinate.x,
            deltaY: evt.clientY - this.startCoordinate.y
        });
    };

    CarouselNinjaContainer.prototype.onMouseUp = function onMouseUp(evt) {
        if (!this.state.dragging) {
            return;
        }
        this.handleSwipe();
    };

    CarouselNinjaContainer.prototype.onMouseLeave = function onMouseLeave(evt) {
        if (!this.state.dragging) {
            return;
        }
        this.handleSwipe();
    };

    CarouselNinjaContainer.prototype.provideMouseEventHandlers = function provideMouseEventHandlers() {
        return this.props.swipe ? {
            onMouseDown: this.onMouseDown.bind(this),
            onMouseMove: this.onMouseMove.bind(this),
            onMouseUp: this.onMouseUp.bind(this),
            onMouseLeave: this.onMouseLeave.bind(this)
        } : null;
    };

    CarouselNinjaContainer.prototype.handleSwipe = function handleSwipe() {
        var deltaAbsX = Math.abs(this.state.deltaX);
        var threshold = this.state.innerWidth * DELTA_PERCENTAGE_SWIPE;
        if (deltaAbsX > threshold) {
            var direction = this.state.deltaX > -1 ? DIRECTION_RIGHT : DIRECTION_LEFT;
            if (direction === DIRECTION_LEFT) {
                this.props.onSwipeLeft(this.props.select + 1);
            } else if (direction === DIRECTION_RIGHT) {
                this.props.onSwipeRight(this.props.select - 1);
            }
        }
        // reset
        this.startCoordinate = {
            x: 0,
            y: 0
        };
        this.setState({
            dragging: false,
            deltaX: 0,
            deltaY: 0
        });
    };

    CarouselNinjaContainer.prototype.componentDidMount = function componentDidMount() {
        this.calculateWidth();
        this._isMounted = true;
        window.addEventListener('resize', this.onResize);
    };

    CarouselNinjaContainer.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
        if (this.props.onSelect) {
            this.props.onSelect(nextProps.select, this.props.select);
        }
    };

    CarouselNinjaContainer.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {
        return false || nextProps.select !== this.props.select || nextProps.children !== this.props.children || nextState !== this.state;
    };

    CarouselNinjaContainer.prototype.componentWillUnmount = function componentWillUnmount() {
        window.addEventListener('resize', this.onResize);
    };

    CarouselNinjaContainer.prototype.render = function render() {
        var _this2 = this;

        /**
         * 選択された要素が見た目上の中央であるとして、その右側と左側にあるべき要素を分類する
         *
         * @example this.props.children = [0, 1, 2, 3, 4]
         *          this.props.select   = 3
         */
        var children = React.Children.toArray(this.props.children);
        var halfSideSize = Math.floor(children.length / 2);
        // [0, 1, 2, *3*, 4] => [0, 1, 2]
        var leftward = children.slice(0, this.props.select);
        // [0, 1, 2, *3*, 4] => [4]
        var rightward = children.slice(this.props.select + 1, children.length);
        // 片側にある過剰分の要素を、もう片側に移して結合する
        if (leftward.length > halfSideSize) {
            // right:[4] + left:[0](, [1, 2]) => left:[1, 2]/ center:[3] / right:[4, 0]
            rightward = [].concat(rightward, leftward.splice(0, leftward.length - halfSideSize));
        } else if (rightward.length > halfSideSize) {
            // right:(2, 3, )[4] + left:[0] => left:[4, 0] / center:[1] / right:[2, 3]
            leftward = [].concat(rightward.splice(halfSideSize), leftward);
        }
        var className = 'CarouselNinjaContainer';
        className += this.state.dragging ? ' CarouselNinjaContainer--dragging' : '';
        className += this._isMounted ? ' CarouselNinjaContainer--mounted' : '';
        return React.createElement("div", React.__spread({ "className": className }, this.provideMouseEventHandlers()), children.map(function (child, i) {
            var isCenter = i === _this2.props.select;
            var isLeftEdge = false;
            var isRightEdge = false;
            var arrangedPos = undefined;
            var calcFunction = undefined;
            // TODO multiple translateX で表現できないか？ calc() があると IE10, IE11 で transition されない
            // TODO 50% のかわりに ラッパーのwidth / 2で実数計算するとか？
            // 左側・右側・中央のいずれに属しているかで位置の指定を変更する
            if ((arrangedPos = leftward.indexOf(child)) !== -1) {
                // Leftward [0=1920, 1=1280, 2=640] 左側は配列の始点に向けてオフセットを大きくとる
                var baseTranslateX = (leftward.length - arrangedPos) * _this2.state.innerWidth;
                calcFunction = 'calc(50% - ' + (baseTranslateX - _this2.state.deltaX) + 'px)';
                isLeftEdge = arrangedPos === 0;
            } else if ((arrangedPos = rightward.indexOf(child)) !== -1) {
                // Rightward [0=640, 1=1280, 2=1920] 右側は配列の終点に向けてオフセットを大きくとる
                var baseTranslateX = (arrangedPos + 1) * _this2.state.innerWidth;
                calcFunction = 'calc(50% + ' + (baseTranslateX + _this2.state.deltaX) + 'px)';
                isRightEdge = arrangedPos === rightward.length - 1;
            } else {
                // Center
                calcFunction = 'calc(50% + ' + (0 + _this2.state.deltaX) + 'px)';
            }
            var className = 'CarouselNinjaContainer__pane';
            className += isCenter ? _this2.props.activeClass : '';
            className += isRightEdge ? _this2.props.rightEdgeClass : '';
            className += isLeftEdge ? _this2.props.leftEdgeClass : '';
            var style = {
                left: calcFunction,
                marginLeft: '-' + _this2.state.innerWidth / 2 + 'px'
            };
            return React.createElement("div", { "ref": 'child-' + i, "className": className, "key": i, "style": style, "aria-hidden": isCenter ? 'false' : 'true' }, child);
        }));
    };

    return CarouselNinjaContainer;
})(React.Component);

exports['default'] = CarouselNinjaContainer;

CarouselNinjaContainer.defaultProps = {
    activeClass: ' is-active',
    rightEdgeClass: ' is-right',
    leftEdgeClass: ' is-left',
    select: 0,
    onSelect: function onSelect() {},
    onSwipeLeft: function onSwipeLeft() {},
    onSwipeRight: function onSwipeRight() {},
    swipe: false
};

},{"debounce":1,"react":undefined}],5:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var CarouselNinjaSelector = (function (_React$Component) {
    _inherits(CarouselNinjaSelector, _React$Component);

    function CarouselNinjaSelector() {
        _classCallCheck(this, CarouselNinjaSelector);

        _React$Component.apply(this, arguments);
    }

    CarouselNinjaSelector.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
        if (this.props.onSelect) {
            this.props.onSelect(nextProps.select, this.props.select);
        }
    };

    CarouselNinjaSelector.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {
        return false || nextProps.select !== this.props.select || nextProps.children !== this.props.children;
    };

    CarouselNinjaSelector.prototype.renderFromChildren = function renderFromChildren() {
        var _this = this;

        return React.Children.map(this.props.children, function (child, i) {
            var isSelectedChild = i === _this.props.select;
            var className = 'CarouselNinjaSelector__item';
            className += isSelectedChild ? _this.props.activeClass : '';
            return React.createElement("li", { "className": className, "key": i, "onClick": _this.props.onClickSelector.bind(_this, i), "aria-selected": isSelectedChild ? 'true' : 'false' }, child);
        });
    };

    CarouselNinjaSelector.prototype.renderItemsBySelf = function renderItemsBySelf() {
        var children = [],
            iz = this.props.length;
        for (var i = 0; i < iz; i++) {
            var isSelectedChild = i === this.props.select;
            var className = 'CarouselNinjaSelector__item';
            className += isSelectedChild ? this.props.activeClass : '';
            children.push(React.createElement("li", { "className": className, "key": i, "onClick": this.props.onClickSelector.bind(this, i), "aria-selected": isSelectedChild ? 'true' : 'false' }, React.createElement("button", { "tabIndex": -1 })));
        }
        return children;
    };

    CarouselNinjaSelector.prototype.render = function render() {
        return React.createElement("ul", { "className": "CarouselNinjaSelector" }, React.Children.count(this.props.children) ? this.renderFromChildren() : this.renderItemsBySelf());
    };

    return CarouselNinjaSelector;
})(React.Component);

exports['default'] = CarouselNinjaSelector;

CarouselNinjaSelector.defaultProps = {
    activeClass: ' is-active',
    select: 0,
    length: 0,
    onSelect: function onSelect() {},
    onClickSelector: function onClickSelector() {}
};

},{"react":undefined}],6:[function(require,module,exports){
/// <reference path="../typings/bundle.d.ts" />
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var React = _react;

var _throttleit = require('throttleit');

var throttle = _throttleit;

var _CarouselNinjaContainer = require('./CarouselNinjaContainer');

var _CarouselNinjaSelector = require('./CarouselNinjaSelector');

var DURATION_THROTTLE_KEYUP = 150;
var KEYCODE_LEFT = 37;
var KEYCODE_RIGHT = 39;

var CarouselNinja = (function (_React$Component) {
    _inherits(CarouselNinja, _React$Component);

    function CarouselNinja() {
        var _this = this;

        _classCallCheck(this, CarouselNinja);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        _React$Component.call.apply(_React$Component, [this].concat(args));
        this.state = {
            currentSelect: 2
        };
        this.onKeyUp = throttle(function (e) {
            switch (e.keyCode) {
                case KEYCODE_LEFT:
                    _this.updateSelect(_this.state.currentSelect - 1);
                    break;
                case KEYCODE_RIGHT:
                    _this.updateSelect(_this.state.currentSelect + 1);
                    break;
            }
        }, DURATION_THROTTLE_KEYUP);
    }

    CarouselNinja.prototype.updateSelect = function updateSelect(select) {
        var lastIndex = React.Children.count(this.props.children) - 1;
        if (select < 0) {
            this.setState({
                currentSelect: lastIndex
            });
        } else if (select > lastIndex) {
            this.setState({
                currentSelect: 0
            });
        } else {
            this.setState({
                currentSelect: select
            });
        }
    };

    CarouselNinja.prototype.onSelectChange = function onSelectChange(nextI, curtI) {
        this.props.onSelect(nextI, curtI);
    };

    CarouselNinja.prototype.onClickSelector = function onClickSelector(selectI) {
        this.updateSelect(selectI);
    };

    CarouselNinja.prototype.onSwipeLeft = function onSwipeLeft(nextI) {
        this.updateSelect(nextI);
    };

    CarouselNinja.prototype.onSwipeRight = function onSwipeRight(nextI) {
        this.updateSelect(nextI);
    };

    CarouselNinja.prototype.render = function render() {
        // TODO [aria-controls]
        return React.createElement("div", { "tabIndex": 0, "className": this.props.className, "onKeyUp": this.onKeyUp.bind(this) }, React.createElement(_CarouselNinjaContainer['default'], { "activeClass": this.props.activeClass, "select": this.state.currentSelect, "onSelect": this.onSelectChange.bind(this), "onSwipeLeft": this.onSwipeLeft.bind(this), "onSwipeRight": this.onSwipeRight.bind(this) }, this.props.children), React.createElement(_CarouselNinjaSelector['default'], { "activeClass": this.props.activeClass, "select": this.state.currentSelect, "length": React.Children.count(this.props.children), "onSelect": this.onSelectChange.bind(this), "onClickSelector": this.onClickSelector.bind(this) }));
    };

    return CarouselNinja;
})(React.Component);

CarouselNinja.defaultProps = {
    className: '',
    activeClass: ' is-active',
    onSelect: function onSelect() {}
};
exports.CarouselNinja = CarouselNinja;
exports.CarouselNinjaContainer = _CarouselNinjaContainer['default'];
exports.CarouselNinjaSelector = _CarouselNinjaSelector['default'];

},{"./CarouselNinjaContainer":4,"./CarouselNinjaSelector":5,"react":undefined,"throttleit":3}]},{},[6])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2Uvbm9kZV9tb2R1bGVzL2RhdGUtbm93L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Rocm90dGxlaXQvaW5kZXguanMiLCJzcmMvQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lci50c3giLCJzcmMvQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yLnRzeCIsInNyYy9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O3FCQ2hDdUIsT0FBTzs7SUFBbEIsS0FBSzs7d0JBRVMsVUFBVTs7SUFBeEIsUUFBUTs7QUFFcEIsSUFBTSx3QkFBd0IsR0FBRyxHQUFHLENBQUM7QUFDckMsSUFBTSxzQkFBc0IsR0FB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QUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBRSxFQUFBLGNBQzdCLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFFLEVBQUEsRUFDaEUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFTLENBQ0UsRUFFekIsS0FBQSxDQUFBLGFBQUEsb0NBQXNCLEVBQUEsYUFBWSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBWSxFQUFBLFFBQzlCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFjLEVBQUEsUUFDM0IsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBRSxFQUFBLFVBQzFDLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFFLEVBQUEsaUJBQzFCLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFFLEVBQUEsQ0FBRyxDQUN2RSxDQUNOO0tBQ0g7O1dBNUVILGFBQUE7R0FBNEIsS0FBSyxDQUFDLFNBQVM7O0FBRWxDLGFBQUEsQ0FBQSxZQUFZLEdBQUc7QUFDcEIsYUFBUyxFQUFLLEVBQUU7QUFDaEIsZUFBVyxFQUFHLFlBQVk7QUFDMUIsWUFBUSxFQUFNLG9CQUFBLEVBQVE7Q0FDdkIsQ0F1RUY7UUFHQyxhQUFhLEdBQWIsYUFBYTtRQUNiLHNCQUFzQjtRQUN0QixxQkFBcUIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIG5vdyA9IHJlcXVpcmUoJ2RhdGUtbm93Jyk7XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICogYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICogTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gKiBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICpcbiAqIEBzb3VyY2UgdW5kZXJzY29yZS5qc1xuICogQHNlZSBodHRwOi8vdW5zY3JpcHRhYmxlLmNvbS8yMDA5LzAzLzIwL2RlYm91bmNpbmctamF2YXNjcmlwdC1tZXRob2RzL1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb24gdG8gd3JhcFxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXQgaW4gbXMgKGAxMDBgKVxuICogQHBhcmFtIHtCb29sZWFufSB3aGV0aGVyIHRvIGV4ZWN1dGUgYXQgdGhlIGJlZ2lubmluZyAoYGZhbHNlYClcbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpe1xuICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG4gIGlmIChudWxsID09IHdhaXQpIHdhaXQgPSAxMDA7XG5cbiAgZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgdmFyIGxhc3QgPSBub3coKSAtIHRpbWVzdGFtcDtcblxuICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID4gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICBjb250ZXh0ID0gdGhpcztcbiAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHRpbWVzdGFtcCA9IG5vdygpO1xuICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGlmICghdGltZW91dCkgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIGlmIChjYWxsTm93KSB7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBEYXRlLm5vdyB8fCBub3dcblxuZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB0aHJvdHRsZTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQsIHdoZW4gaW52b2tlZCwgaW52b2tlcyBgZnVuY2AgYXQgbW9zdCBvbmNlIHBlciBgd2FpdGAgbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgRnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0IE51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBtdXN0IGVsYXBzZSBiZXR3ZWVuIGBmdW5jYCBpbnZvY2F0aW9ucy5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB0aGF0IHdyYXBzIHRoZSBgZnVuY2AgZnVuY3Rpb24gcGFzc2VkIGluLlxuICovXG5cbmZ1bmN0aW9uIHRocm90dGxlIChmdW5jLCB3YWl0KSB7XG4gIHZhciBjdHgsIGFyZ3MsIHJ0biwgdGltZW91dElEOyAvLyBjYWNoaW5nXG4gIHZhciBsYXN0ID0gMDtcblxuICByZXR1cm4gZnVuY3Rpb24gdGhyb3R0bGVkICgpIHtcbiAgICBjdHggPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGRlbHRhID0gbmV3IERhdGUoKSAtIGxhc3Q7XG4gICAgaWYgKCF0aW1lb3V0SUQpXG4gICAgICBpZiAoZGVsdGEgPj0gd2FpdCkgY2FsbCgpO1xuICAgICAgZWxzZSB0aW1lb3V0SUQgPSBzZXRUaW1lb3V0KGNhbGwsIHdhaXQgLSBkZWx0YSk7XG4gICAgcmV0dXJuIHJ0bjtcbiAgfTtcblxuICBmdW5jdGlvbiBjYWxsICgpIHtcbiAgICB0aW1lb3V0SUQgPSAwO1xuICAgIGxhc3QgPSArbmV3IERhdGUoKTtcbiAgICBydG4gPSBmdW5jLmFwcGx5KGN0eCwgYXJncyk7XG4gICAgY3R4ID0gbnVsbDtcbiAgICBhcmdzID0gbnVsbDtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCAqIGFzIGRlYm91bmNlIGZyb20gJ2RlYm91bmNlJztcblxuY29uc3QgRFVSQVRJT05fREVCT1VOQ0VfUkVTSVpFID0gMzAwO1xuY29uc3QgREVMVEFfUEVSQ0VOVEFHRV9TV0lQRSAgID0gLjI7XG5cbmNvbnN0IERJUkVDVElPTl9SSUdIVCA9IDA7XG5jb25zdCBESVJFQ1RJT05fTEVGVCAgPSAxO1xuXG5pbnRlcmZhY2UgQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lclByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8Q2Fyb3VzZWxOaW5qYUNvbnRhaW5lcj4ge1xuICBhY3RpdmVDbGFzcz86IHN0cmluZztcbiAgcmlnaHRFZGdlQ2xhc3M/OiBzdHJpbmc7XG4gIGxlZnRFZGdlQ2xhc3M/OiBzdHJpbmc7XG4gIHNlbGVjdDogbnVtYmVyO1xuICBvblNlbGVjdD8gOiAobmV4dEk6IG51bWJlciwgY3VydEk6IG51bWJlcikgPT4gdm9pZDtcbiAgb25Td2lwZUxlZnQ/IDogKG5leHRJOiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uU3dpcGVSaWdodD8gOiAobmV4dEk6IG51bWJlcikgPT4gdm9pZDtcbiAgc3dpcGU/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lclN0YXRlIHtcbiAgaW5uZXJXaWR0aD86IG51bWJlcjtcbiAgZHJhZ2dpbmc/OiBib29sZWFuO1xuICBkZWx0YVg/OiBudW1iZXI7XG4gIGRlbHRhWT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxDYXJvdXNlbE5pbmphQ29udGFpbmVyUHJvcHMsIENhcm91c2VsTmluamFDb250YWluZXJTdGF0ZT4ge1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgYWN0aXZlQ2xhc3MgICAgOiAnIGlzLWFjdGl2ZScsXG4gICAgcmlnaHRFZGdlQ2xhc3MgOiAnIGlzLXJpZ2h0JyxcbiAgICBsZWZ0RWRnZUNsYXNzICA6ICcgaXMtbGVmdCcsXG4gICAgc2VsZWN0ICAgICAgICAgOiAwLFxuICAgIG9uU2VsZWN0ICAgICAgIDogKCkgPT4ge30sXG4gICAgb25Td2lwZUxlZnQgICAgOiAoKSA9PiB7fSxcbiAgICBvblN3aXBlUmlnaHQgICA6ICgpID0+IHt9LFxuICAgIHN3aXBlICAgICAgICAgIDogZmFsc2VcbiAgfTtcblxuICBzdGF0ZSA9IHtcbiAgICBvdXRlcldpZHRoIDogMCxcbiAgICBpbm5lcldpZHRoIDogMCxcbiAgICBkcmFnZ2luZyAgIDogZmFsc2UsXG4gICAgZGVsdGFYICAgICA6IDAsXG4gICAgZGVsdGFZICAgICA6IDBcbiAgfTtcblxuICBfaXNNb3VudGVkID0gZmFsc2U7XG5cbiAgc3RhcnRDb29yZGluYXRlOiB7XG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICB9ID0ge1xuICAgIHggOiAwLFxuICAgIHkgOiAwXG4gIH07XG5cbiAgY2FsY3VsYXRlV2lkdGgoKSB7XG4gICAgY29uc3QgZmlyc3RDaGlsZDogRWxlbWVudCA9IHRoaXMucmVmc1tgY2hpbGQtJHt0aGlzLnByb3BzLnNlbGVjdH1gXSBhcyBhbnk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpbm5lcldpZHRoIDogZmlyc3RDaGlsZC5jbGllbnRXaWR0aFxuICAgIH0pO1xuICB9XG5cbiAgb25Nb3VzZURvd24oZXZ0OiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5zdGFydENvb3JkaW5hdGUgPSB7XG4gICAgICB4IDogZXZ0LmNsaWVudFgsXG4gICAgICB5IDogZXZ0LmNsaWVudFlcbiAgICB9O1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhZ2dpbmcgICA6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIG9uTW91c2VNb3ZlKGV2dDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRlbHRhWCA6IGV2dC5jbGllbnRYIC0gdGhpcy5zdGFydENvb3JkaW5hdGUueCxcbiAgICAgIGRlbHRhWSA6IGV2dC5jbGllbnRZIC0gdGhpcy5zdGFydENvb3JkaW5hdGUueVxuICAgIH0pO1xuICB9XG5cbiAgb25Nb3VzZVVwKGV2dDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZVN3aXBlKCk7XG4gIH1cblxuICBvbk1vdXNlTGVhdmUoZXZ0OiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlU3dpcGUoKTtcbiAgfVxuXG4gIHByb3ZpZGVNb3VzZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuc3dpcGUgPyB7XG4gICAgICBvbk1vdXNlRG93biAgOiB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyksXG4gICAgICBvbk1vdXNlTW92ZSAgOiB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyksXG4gICAgICBvbk1vdXNlVXAgICAgOiB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpLFxuICAgICAgb25Nb3VzZUxlYXZlIDogdGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKVxuICAgIH0gOiBudWxsO1xuICB9XG5cbiAgaGFuZGxlU3dpcGUoKSB7XG4gICAgY29uc3QgZGVsdGFBYnNYID0gTWF0aC5hYnModGhpcy5zdGF0ZS5kZWx0YVgpO1xuICAgIGNvbnN0IHRocmVzaG9sZCA9IHRoaXMuc3RhdGUuaW5uZXJXaWR0aCAqIERFTFRBX1BFUkNFTlRBR0VfU1dJUEU7XG5cbiAgICBpZiAoZGVsdGFBYnNYID4gdGhyZXNob2xkKSB7XG5cbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuc3RhdGUuZGVsdGFYID4gLTEgPyBESVJFQ1RJT05fUklHSFQgOiBESVJFQ1RJT05fTEVGVDtcblxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRElSRUNUSU9OX0xFRlQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblN3aXBlTGVmdCh0aGlzLnByb3BzLnNlbGVjdCArIDEpO1xuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IERJUkVDVElPTl9SSUdIVCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uU3dpcGVSaWdodCh0aGlzLnByb3BzLnNlbGVjdCAtIDEpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgLy8gcmVzZXRcbiAgICB0aGlzLnN0YXJ0Q29vcmRpbmF0ZSA9IHtcbiAgICAgIHggOiAwLFxuICAgICAgeSA6IDBcbiAgICB9O1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJhZ2dpbmcgOiBmYWxzZSxcbiAgICAgIGRlbHRhWCAgIDogMCxcbiAgICAgIGRlbHRhWSAgIDogMFxuICAgIH0pO1xuICB9XG5cbiAgb25SZXNpemUgPSBkZWJvdW5jZSgoZXZ0OiBFdmVudCkgPT4ge1xuICAgIHRoaXMuY2FsY3VsYXRlV2lkdGgoKTtcbiAgfSwgRFVSQVRJT05fREVCT1VOQ0VfUkVTSVpFKTtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhbGN1bGF0ZVdpZHRoKCk7XG4gICAgdGhpcy5faXNNb3VudGVkID0gdHJ1ZTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZSk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wczogQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lclByb3BzKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25TZWxlY3QpIHtcbiAgICAgIHRoaXMucHJvcHMub25TZWxlY3QobmV4dFByb3BzLnNlbGVjdCwgdGhpcy5wcm9wcy5zZWxlY3QpO1xuICAgIH1cbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IENhcm91c2VsTmluamFDb250YWluZXJQcm9wcywgbmV4dFN0YXRlOiBDYXJvdXNlbE5pbmphQ29udGFpbmVyU3RhdGUpIHtcbiAgICByZXR1cm4gZmFsc2UgfHxcbiAgICAgIG5leHRQcm9wcy5zZWxlY3QgIT09IHRoaXMucHJvcHMuc2VsZWN0IHx8XG4gICAgICBuZXh0UHJvcHMuY2hpbGRyZW4gIT09IHRoaXMucHJvcHMuY2hpbGRyZW4gfHxcbiAgICAgIG5leHRTdGF0ZSAhPT0gdGhpcy5zdGF0ZVxuICAgIDtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvKipcbiAgICAgKiDpgbjmip7jgZXjgozjgZ/opoHntKDjgYzopovjgZ/nm67kuIrjga7kuK3lpK7jgafjgYLjgovjgajjgZfjgabjgIHjgZ3jga7lj7PlgbTjgajlt6blgbTjgavjgYLjgovjgbnjgY3opoHntKDjgpLliIbpoZ7jgZnjgotcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIHRoaXMucHJvcHMuY2hpbGRyZW4gPSBbMCwgMSwgMiwgMywgNF1cbiAgICAgKiAgICAgICAgICB0aGlzLnByb3BzLnNlbGVjdCAgID0gM1xuICAgICAqL1xuICAgIGNvbnN0IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGVbXSA9IChSZWFjdC5DaGlsZHJlbiBhcyBhbnkpLnRvQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbik7XG4gICAgY29uc3QgaGFsZlNpZGVTaXplID0gTWF0aC5mbG9vcihjaGlsZHJlbi5sZW5ndGggLyAyKTtcblxuICAgIC8vIFswLCAxLCAyLCAqMyosIDRdID0+IFswLCAxLCAyXVxuICAgIGxldCBsZWZ0d2FyZCA9IGNoaWxkcmVuLnNsaWNlKDAsIHRoaXMucHJvcHMuc2VsZWN0KTtcbiAgICAvLyBbMCwgMSwgMiwgKjMqLCA0XSA9PiBbNF1cbiAgICBsZXQgcmlnaHR3YXJkID0gY2hpbGRyZW4uc2xpY2UodGhpcy5wcm9wcy5zZWxlY3QgKyAxLCBjaGlsZHJlbi5sZW5ndGgpO1xuXG4gICAgLy8g54mH5YG044Gr44GC44KL6YGO5Ymw5YiG44Gu6KaB57Sg44KS44CB44KC44GG54mH5YG044Gr56e744GX44Gm57WQ5ZCI44GZ44KLXG4gICAgaWYgKGxlZnR3YXJkLmxlbmd0aCA+IGhhbGZTaWRlU2l6ZSkge1xuICAgICAgLy8gcmlnaHQ6WzRdICsgbGVmdDpbMF0oLCBbMSwgMl0pID0+IGxlZnQ6WzEsIDJdLyBjZW50ZXI6WzNdIC8gcmlnaHQ6WzQsIDBdXG4gICAgICByaWdodHdhcmQgPSBbXS5jb25jYXQocmlnaHR3YXJkLCBsZWZ0d2FyZC5zcGxpY2UoMCwgbGVmdHdhcmQubGVuZ3RoIC0gaGFsZlNpZGVTaXplKSk7XG4gICAgfSBlbHNlIGlmIChyaWdodHdhcmQubGVuZ3RoID4gaGFsZlNpZGVTaXplKSB7XG4gICAgICAvLyByaWdodDooMiwgMywgKVs0XSArIGxlZnQ6WzBdID0+IGxlZnQ6WzQsIDBdIC8gY2VudGVyOlsxXSAvIHJpZ2h0OlsyLCAzXVxuICAgICAgbGVmdHdhcmQgPSBbXS5jb25jYXQocmlnaHR3YXJkLnNwbGljZShoYWxmU2lkZVNpemUpLCBsZWZ0d2FyZCk7XG4gICAgfVxuXG4gICAgbGV0IGNsYXNzTmFtZSA9ICdDYXJvdXNlbE5pbmphQ29udGFpbmVyJztcbiAgICBjbGFzc05hbWUgKz0gdGhpcy5zdGF0ZS5kcmFnZ2luZyA/ICcgQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lci0tZHJhZ2dpbmcnIDogJyc7XG4gICAgY2xhc3NOYW1lICs9IHRoaXMuX2lzTW91bnRlZCA/ICcgQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lci0tbW91bnRlZCcgOiAnJztcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICAgey4uLnRoaXMucHJvdmlkZU1vdXNlRXZlbnRIYW5kbGVycygpfT5cblxuICAgICAgICAgIHtjaGlsZHJlbi5tYXAoKGNoaWxkOiBSZWFjdC5SZWFjdE5vZGUsIGk6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNDZW50ZXIgPSAoaSA9PT0gdGhpcy5wcm9wcy5zZWxlY3QpO1xuICAgICAgICAgICAgbGV0IGlzTGVmdEVkZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBpc1JpZ2h0RWRnZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBsZXQgYXJyYW5nZWRQb3M6IG51bWJlcjtcbiAgICAgICAgICAgIGxldCBjYWxjRnVuY3Rpb246IHN0cmluZztcblxuICAgICAgICAgICAgLy8gVE9ETyBtdWx0aXBsZSB0cmFuc2xhdGVYIOOBp+ihqOePvuOBp+OBjeOBquOBhOOBi++8nyBjYWxjKCkg44GM44GC44KL44GoIElFMTAsIElFMTEg44GnIHRyYW5zaXRpb24g44GV44KM44Gq44GEXG4gICAgICAgICAgICAvLyBUT0RPIDUwJSDjga7jgYvjgo/jgorjgasg44Op44OD44OR44O844Gud2lkdGggLyAy44Gn5a6f5pWw6KiI566X44GZ44KL44Go44GL77yfXG4gICAgICAgICAgICAvLyDlt6blgbTjg7vlj7PlgbTjg7vkuK3lpK7jga7jgYTjgZrjgozjgavlsZ7jgZfjgabjgYTjgovjgYvjgafkvY3nva7jga7mjIflrprjgpLlpInmm7TjgZnjgotcbiAgICAgICAgICAgIGlmICgoYXJyYW5nZWRQb3MgPSBsZWZ0d2FyZC5pbmRleE9mKGNoaWxkKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIC8vIExlZnR3YXJkIFswPTE5MjAsIDE9MTI4MCwgMj02NDBdIOW3puWBtOOBr+mFjeWIl+OBruWni+eCueOBq+WQkeOBkeOBpuOCquODleOCu+ODg+ODiOOCkuWkp+OBjeOBj+OBqOOCi1xuICAgICAgICAgICAgICBsZXQgYmFzZVRyYW5zbGF0ZVggPSAobGVmdHdhcmQubGVuZ3RoIC0gYXJyYW5nZWRQb3MpICogdGhpcy5zdGF0ZS5pbm5lcldpZHRoXG4gICAgICAgICAgICAgIGNhbGNGdW5jdGlvbiA9IGBjYWxjKDUwJSAtICR7YmFzZVRyYW5zbGF0ZVggLSB0aGlzLnN0YXRlLmRlbHRhWH1weClgO1xuICAgICAgICAgICAgICBpc0xlZnRFZGdlID0gYXJyYW5nZWRQb3MgPT09IDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChhcnJhbmdlZFBvcyA9IHJpZ2h0d2FyZC5pbmRleE9mKGNoaWxkKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIC8vIFJpZ2h0d2FyZCBbMD02NDAsIDE9MTI4MCwgMj0xOTIwXSDlj7PlgbTjga/phY3liJfjga7ntYLngrnjgavlkJHjgZHjgabjgqrjg5Xjgrvjg4Pjg4jjgpLlpKfjgY3jgY/jgajjgotcbiAgICAgICAgICAgICAgbGV0IGJhc2VUcmFuc2xhdGVYID0gKGFycmFuZ2VkUG9zICsgMSkgKiB0aGlzLnN0YXRlLmlubmVyV2lkdGhcbiAgICAgICAgICAgICAgY2FsY0Z1bmN0aW9uID0gYGNhbGMoNTAlICsgJHtiYXNlVHJhbnNsYXRlWCArIHRoaXMuc3RhdGUuZGVsdGFYfXB4KWA7XG4gICAgICAgICAgICAgIGlzUmlnaHRFZGdlID0gYXJyYW5nZWRQb3MgPT09IHJpZ2h0d2FyZC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gQ2VudGVyXG4gICAgICAgICAgICAgIGNhbGNGdW5jdGlvbiA9IGBjYWxjKDUwJSArICR7MCArIHRoaXMuc3RhdGUuZGVsdGFYfXB4KWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSAnQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lcl9fcGFuZSc7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gaXNDZW50ZXIgICAgPyB0aGlzLnByb3BzLmFjdGl2ZUNsYXNzICAgIDogJyc7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gaXNSaWdodEVkZ2UgPyB0aGlzLnByb3BzLnJpZ2h0RWRnZUNsYXNzIDogJyc7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gaXNMZWZ0RWRnZSAgPyB0aGlzLnByb3BzLmxlZnRFZGdlQ2xhc3MgIDogJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0ge1xuICAgICAgICAgICAgICBsZWZ0ICAgICAgIDogY2FsY0Z1bmN0aW9uLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0IDogYC0ke3RoaXMuc3RhdGUuaW5uZXJXaWR0aCAvIDJ9cHhgXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gPGRpdiByZWY9e2BjaGlsZC0ke2l9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49e2lzQ2VudGVyID8gJ2ZhbHNlJyA6ICd0cnVlJ30+e2NoaWxkfTwvZGl2PjtcbiAgICAgICAgICB9KX1cblxuICAgICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RFbGVtZW50ID0gX19SZWFjdC5SZWFjdEVsZW1lbnQ7XG5cbmludGVyZmFjZSBDYXJvdXNlbFNlbGVjdG9yUHJvcHMgZXh0ZW5kcyBSZWFjdC5Qcm9wczxDYXJvdXNlbE5pbmphU2VsZWN0b3I+IHtcbiAgYWN0aXZlQ2xhc3M/OiBzdHJpbmc7XG4gIHNlbGVjdDogbnVtYmVyO1xuICBsZW5ndGg6IG51bWJlcjtcbiAgb25TZWxlY3Q/OiAocHJldkk6IG51bWJlciwgbmV4dEk6IG51bWJlcikgPT4gdm9pZDtcbiAgb25DbGlja1NlbGVjdG9yPzogKHNlbGVjdEk6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PENhcm91c2VsU2VsZWN0b3JQcm9wcywgYW55PiB7XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBhY3RpdmVDbGFzcyAgICAgOiAnIGlzLWFjdGl2ZScsXG4gICAgc2VsZWN0ICAgICAgICAgIDogMCxcbiAgICBsZW5ndGggICAgICAgICAgOiAwLFxuICAgIG9uU2VsZWN0ICAgICAgICA6ICgpID0+IHt9LFxuICAgIG9uQ2xpY2tTZWxlY3RvciA6ICgpID0+IHt9LFxuICB9O1xuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBDYXJvdXNlbFNlbGVjdG9yUHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5vblNlbGVjdCkge1xuICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChuZXh0UHJvcHMuc2VsZWN0LCB0aGlzLnByb3BzLnNlbGVjdCk7XG4gICAgfVxuICB9XG5cbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wczogQ2Fyb3VzZWxTZWxlY3RvclByb3BzKSB7XG4gICAgcmV0dXJuIGZhbHNlIHx8XG4gICAgICBuZXh0UHJvcHMuc2VsZWN0ICE9PSB0aGlzLnByb3BzLnNlbGVjdCB8fFxuICAgICAgbmV4dFByb3BzLmNoaWxkcmVuICE9PSB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgO1xuICB9XG5cbiAgcmVuZGVyRnJvbUNoaWxkcmVuKCkge1xuICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5tYXAodGhpcy5wcm9wcy5jaGlsZHJlbiwgKGNoaWxkOiBSZWFjdC5SZWFjdE5vZGUsIGk6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgaXNTZWxlY3RlZENoaWxkID0gaSA9PT0gdGhpcy5wcm9wcy5zZWxlY3Q7XG4gICAgICBsZXQgY2xhc3NOYW1lID0gJ0Nhcm91c2VsTmluamFTZWxlY3Rvcl9faXRlbSc7XG4gICAgICBjbGFzc05hbWUgKz0gaXNTZWxlY3RlZENoaWxkID8gdGhpcy5wcm9wcy5hY3RpdmVDbGFzcyA6ICcnO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGxpIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrU2VsZWN0b3IuYmluZCh0aGlzLCBpKX1cbiAgICAgICAgICAgIGFyaWEtc2VsZWN0ZWQ9e2lzU2VsZWN0ZWRDaGlsZCA/ICd0cnVlJyA6ICdmYWxzZSd9PlxuICAgICAgICAgIHtjaGlsZH1cbiAgICAgICAgPC9saT5cbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJJdGVtc0J5U2VsZigpIHtcbiAgICBjb25zdCBjaGlsZHJlbjogUmVhY3RFbGVtZW50PGFueT5bXSA9IFtdLCBpeiA9IHRoaXMucHJvcHMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXo7IGkrKykge1xuICAgICAgbGV0IGlzU2VsZWN0ZWRDaGlsZCA9IGkgPT09IHRoaXMucHJvcHMuc2VsZWN0O1xuICAgICAgbGV0IGNsYXNzTmFtZSA9ICdDYXJvdXNlbE5pbmphU2VsZWN0b3JfX2l0ZW0nO1xuICAgICAgY2xhc3NOYW1lICs9IGlzU2VsZWN0ZWRDaGlsZCA/IHRoaXMucHJvcHMuYWN0aXZlQ2xhc3MgOiAnJztcbiAgICAgIGNoaWxkcmVuLnB1c2goKFxuICAgICAgICA8bGkgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2tTZWxlY3Rvci5iaW5kKHRoaXMsIGkpfVxuICAgICAgICAgICAgYXJpYS1zZWxlY3RlZD17aXNTZWxlY3RlZENoaWxkID8gJ3RydWUnIDogJ2ZhbHNlJ30+XG4gICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17LTF9IC8+XG4gICAgICAgIDwvbGk+XG4gICAgICApKVxuICAgIH1cbiAgICByZXR1cm4gY2hpbGRyZW5cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPHVsIGNsYXNzTmFtZT1cIkNhcm91c2VsTmluamFTZWxlY3RvclwiPlxuICAgICAgICB7UmVhY3QuQ2hpbGRyZW4uY291bnQodGhpcy5wcm9wcy5jaGlsZHJlbikgPyB0aGlzLnJlbmRlckZyb21DaGlsZHJlbigpIDogdGhpcy5yZW5kZXJJdGVtc0J5U2VsZigpfVxuICAgICAgPC91bD5cbiAgICApO1xuICB9XG59XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy9idW5kbGUuZC50c1wiIC8+XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgKiBhcyB0aHJvdHRsZSBmcm9tICd0aHJvdHRsZWl0JztcbmltcG9ydCBDYXJvdXNlbE5pbmphQ29udGFpbmVyIGZyb20gJy4vQ2Fyb3VzZWxOaW5qYUNvbnRhaW5lcic7XG5pbXBvcnQgQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yIGZyb20gJy4vQ2Fyb3VzZWxOaW5qYVNlbGVjdG9yJztcblxuY29uc3QgRFVSQVRJT05fVEhST1RUTEVfS0VZVVAgPSAxNTA7XG5cbmNvbnN0IEtFWUNPREVfTEVGVCAgPSAzNztcbmNvbnN0IEtFWUNPREVfUklHSFQgPSAzOTtcblxuaW50ZXJmYWNlIENhcm91c2VsTmluamFQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPENhcm91c2VsTmluamE+IHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBhY3RpdmVDbGFzcz86IHN0cmluZztcbiAgb25TZWxlY3Q/OiAocHJldkk6IG51bWJlciwgbmV4dEk6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuY2xhc3MgQ2Fyb3VzZWxOaW5qYSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxDYXJvdXNlbE5pbmphUHJvcHMsIGFueT4ge1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgY2xhc3NOYW1lICAgOiAnJyxcbiAgICBhY3RpdmVDbGFzcyA6ICcgaXMtYWN0aXZlJyxcbiAgICBvblNlbGVjdCAgICA6ICgpID0+IHt9LFxuICB9O1xuXG4gIHN0YXRlID0ge1xuICAgIGN1cnJlbnRTZWxlY3QgOiAyXG4gIH07XG5cbiAgdXBkYXRlU2VsZWN0KHNlbGVjdDogbnVtYmVyKSB7XG4gICAgY29uc3QgbGFzdEluZGV4ID0gUmVhY3QuQ2hpbGRyZW4uY291bnQodGhpcy5wcm9wcy5jaGlsZHJlbikgLSAxO1xuICAgIGlmIChzZWxlY3QgPCAwKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY3VycmVudFNlbGVjdCA6IGxhc3RJbmRleFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChzZWxlY3QgPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjdXJyZW50U2VsZWN0IDogMFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjdXJyZW50U2VsZWN0IDogc2VsZWN0XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBvbktleVVwID0gdGhyb3R0bGUoKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICBzd2l0Y2goZS5rZXlDb2RlKSB7XG4gICAgICBjYXNlIEtFWUNPREVfTEVGVDpcbiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3QodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0IC0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVlDT0RFX1JJR0hUOlxuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdCh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3QgKyAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LCBEVVJBVElPTl9USFJPVFRMRV9LRVlVUCk7XG5cbiAgb25TZWxlY3RDaGFuZ2UobmV4dEk6IG51bWJlciwgY3VydEk6IG51bWJlcikge1xuICAgIHRoaXMucHJvcHMub25TZWxlY3QobmV4dEksIGN1cnRJKTtcbiAgfVxuXG4gIG9uQ2xpY2tTZWxlY3RvcihzZWxlY3RJOiBudW1iZXIpIHtcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdChzZWxlY3RJKTtcbiAgfVxuXG4gIG9uU3dpcGVMZWZ0KG5leHRJOiBudW1iZXIpIHtcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdChuZXh0SSk7XG4gIH1cblxuICBvblN3aXBlUmlnaHQobmV4dEk6IG51bWJlcikge1xuICAgIHRoaXMudXBkYXRlU2VsZWN0KG5leHRJKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyBUT0RPIFthcmlhLWNvbnRyb2xzXVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgdGFiSW5kZXg9ezB9IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWV9IG9uS2V5VXA9e3RoaXMub25LZXlVcC5iaW5kKHRoaXMpfT5cbiAgICAgICAgPENhcm91c2VsTmluamFDb250YWluZXIgYWN0aXZlQ2xhc3M9e3RoaXMucHJvcHMuYWN0aXZlQ2xhc3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdD17dGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17dGhpcy5vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN3aXBlTGVmdD17dGhpcy5vblN3aXBlTGVmdC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN3aXBlUmlnaHQ9e3RoaXMub25Td2lwZVJpZ2h0LmJpbmQodGhpcyl9PlxuICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICA8L0Nhcm91c2VsTmluamFDb250YWluZXI+XG5cbiAgICAgICAgPENhcm91c2VsTmluamFTZWxlY3RvciBhY3RpdmVDbGFzcz17dGhpcy5wcm9wcy5hY3RpdmVDbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Q9e3RoaXMuc3RhdGUuY3VycmVudFNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg9e1JlYWN0LkNoaWxkcmVuLmNvdW50KHRoaXMucHJvcHMuY2hpbGRyZW4pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXt0aGlzLm9uU2VsZWN0Q2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGlja1NlbGVjdG9yPXt0aGlzLm9uQ2xpY2tTZWxlY3Rvci5iaW5kKHRoaXMpfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBDYXJvdXNlbE5pbmphLFxuICBDYXJvdXNlbE5pbmphQ29udGFpbmVyLFxuICBDYXJvdXNlbE5pbmphU2VsZWN0b3Jcbn07XG4iXX0=
